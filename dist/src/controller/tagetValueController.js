const a7_0xdc7cd1=a7_0x3aba;(function(_0x5148cd,_0x21ed46){const _0x29dbc7=a7_0x3aba,_0x7422f3=_0x5148cd();while(!![]){try{const _0x6446f3=parseInt(_0x29dbc7(0x98))/0x1+-parseInt(_0x29dbc7(0x8c))/0x2+-parseInt(_0x29dbc7(0x84))/0x3*(-parseInt(_0x29dbc7(0xa8))/0x4)+parseInt(_0x29dbc7(0xb5))/0x5+-parseInt(_0x29dbc7(0x97))/0x6*(-parseInt(_0x29dbc7(0xb7))/0x7)+parseInt(_0x29dbc7(0xab))/0x8*(-parseInt(_0x29dbc7(0x96))/0x9)+parseInt(_0x29dbc7(0x86))/0xa*(-parseInt(_0x29dbc7(0x94))/0xb);if(_0x6446f3===_0x21ed46)break;else _0x7422f3['push'](_0x7422f3['shift']());}catch(_0x18920c){_0x7422f3['push'](_0x7422f3['shift']());}}}(a7_0x4221,0x35bc9));const axios=require(a7_0xdc7cd1(0x8a)),SalesModel=require(a7_0xdc7cd1(0xb9));require(a7_0xdc7cd1(0x8e))[a7_0xdc7cd1(0xbd)]();const API_URL=process[a7_0xdc7cd1(0xa6)]['Taget_Value_API'],convertToDecimal=_0x5a6b2d=>{const _0x25cb98=a7_0xdc7cd1;if(!_0x5a6b2d||isNaN(_0x5a6b2d))return'0.00';return parseFloat(_0x5a6b2d[_0x25cb98(0x87)]()[_0x25cb98(0x83)](',','.'))[_0x25cb98(0x8d)](0x2);},fetchSAPSalesData=async()=>{const _0x24228e=a7_0xdc7cd1;try{console[_0x24228e(0xb8)]('üîç\x20Fetching\x20Sales\x20Data\x20from\x20API:',API_URL);const _0xf180dc=await axios[_0x24228e(0x93)](API_URL,{'auth':{'username':process[_0x24228e(0xa6)][_0x24228e(0x88)],'password':process['env'][_0x24228e(0x9d)]},'headers':{'Accept':'application/json'}});if(!_0xf180dc['data']){console[_0x24228e(0xbf)](_0x24228e(0xaf));throw new Error(_0x24228e(0x9f));}console['log'](_0x24228e(0x90),JSON[_0x24228e(0x9b)](_0xf180dc[_0x24228e(0xae)])['length']),console[_0x24228e(0xb8)]('üìå\x20API\x20Response\x20Data:',JSON[_0x24228e(0x9b)](_0xf180dc[_0x24228e(0xae)],null,0x2));const _0x354307=_0xf180dc[_0x24228e(0xae)]?.['d']?.[_0x24228e(0xad)];if(!Array[_0x24228e(0x82)](_0x354307)){console[_0x24228e(0xb6)]('‚ùå\x20Invalid\x20API\x20Response\x20Format:',JSON[_0x24228e(0x9b)](_0xf180dc['data'])[_0x24228e(0x81)](0x0,0xc8)+_0x24228e(0xa9));throw new Error(_0x24228e(0x91));}return console[_0x24228e(0xb8)]('üì¶\x20Received\x20'+_0x354307[_0x24228e(0x9a)]+'\x20sales\x20data\x20entries'),_0x354307;}catch(_0x10f084){console[_0x24228e(0xb6)](_0x24228e(0x92),_0x10f084[_0x24228e(0xb4)]);throw new Error(_0x24228e(0xb3)+_0x10f084[_0x24228e(0xb4)]);}},fetchAndInsertSalesData=async(_0x35d2f0,_0x38b812)=>{const _0x33576a=a7_0xdc7cd1;try{console[_0x33576a(0xb8)](_0x33576a(0xbc));const _0x17ef94=await fetchSAPSalesData();if(!Array[_0x33576a(0x82)](_0x17ef94)||_0x17ef94[_0x33576a(0x9a)]===0x0){console[_0x33576a(0xbf)](_0x33576a(0xbb));if(_0x38b812)return _0x38b812[_0x33576a(0xa5)](0x190)[_0x33576a(0xbe)]({'message':_0x33576a(0x80)});return;}console['log'](_0x33576a(0xa7)+_0x17ef94[_0x33576a(0x9a)]+_0x33576a(0xb1));const _0x54b445=_0x17ef94['map']((_0x140abf,_0x57d821)=>{const _0xd97c09=_0x33576a;if(!_0x140abf||typeof _0x140abf!=='object')return console[_0xd97c09(0xb6)]('‚ùå\x20Skipping\x20invalid\x20entry\x20at\x20index\x20'+_0x57d821+':',_0x140abf),null;return{'Gjahr':String(_0x140abf?.[_0xd97c09(0xc0)]||''),'MonthD':String(_0x140abf?.[_0xd97c09(0xa2)]||''),'Bzirk':String(_0x140abf?.[_0xd97c09(0xa3)]||''),'Matkl':String(_0x140abf?.[_0xd97c09(0x9e)]||''),'Spart':String(_0x140abf?.['Spart']||''),'Zone':String(_0x140abf?.[_0xd97c09(0xaa)]||''),'Bztxt':String(_0x140abf?.[_0xd97c09(0xa1)]||''),'Wgbez':String(_0x140abf?.[_0xd97c09(0xa0)]||''),'PlannedOrder':convertToDecimal(_0x140abf?.[_0xd97c09(0x8f)]),'TotalInvoice':convertToDecimal(_0x140abf?.[_0xd97c09(0xac)])};})['filter'](Boolean);console[_0x33576a(0xb8)](_0x33576a(0x9c),JSON['stringify'](_0x54b445,null,0x2));const _0x553190=await SalesModel[_0x33576a(0x85)](_0x54b445);if(!_0x553190||typeof _0x553190!=='object'||!_0x553190['success']){console[_0x33576a(0xb6)]('‚ùå\x20Error\x20inserting\x20or\x20updating\x20sales\x20data:',_0x553190?.[_0x33576a(0xb6)]||'Unexpected\x20database\x20response');if(_0x38b812)return _0x38b812[_0x33576a(0xa5)](0x1f4)[_0x33576a(0xbe)]({'message':_0x33576a(0x8b),'error':_0x553190?.[_0x33576a(0xb6)]||_0x33576a(0xb0)});return;}console['log'](_0x33576a(0xb2));if(_0x38b812)return _0x38b812[_0x33576a(0xa5)](0xc8)[_0x33576a(0xbe)]({'message':_0x33576a(0xba),'insertedRows':_0x553190[_0x33576a(0xa4)][_0x33576a(0x9a)],'updatedRows':_0x553190[_0x33576a(0xa4)]['length'],'failedRows':_0x553190['failedRows']['length'],'errors':_0x553190[_0x33576a(0x99)]});}catch(_0x2f444a){console['error'](_0x33576a(0x95),_0x2f444a[_0x33576a(0xb4)]);if(_0x38b812)return _0x38b812[_0x33576a(0xa5)](0x1f4)['json']({'message':_0x33576a(0x89),'error':_0x2f444a[_0x33576a(0xb4)]});}};module['exports']={'fetchAndInsertSalesData':fetchAndInsertSalesData};function a7_0x3aba(_0x2285e8,_0x1df58){const _0x422182=a7_0x4221();return a7_0x3aba=function(_0x3abaef,_0x2f35bc){_0x3abaef=_0x3abaef-0x80;let _0x2fe949=_0x422182[_0x3abaef];return _0x2fe949;},a7_0x3aba(_0x2285e8,_0x1df58);}function a7_0x4221(){const _0xa675a8=['453bvnvVQ','insertOrUpdateSalesData','635790vMCSMc','toString','SAP_USERNAME','Internal\x20Server\x20Error','axios','Error\x20inserting\x20or\x20updating\x20sales\x20data','856752SjEleN','toFixed','dotenv','PlannedOrder','‚úÖ\x20API\x20Response\x20Received.Length:','Invalid\x20data\x20format\x20received\x20from\x20SAP','‚ùå\x20Error\x20fetching\x20SAP\x20sales\x20data:','get','11oIShAi','‚ùå\x20Error\x20syncing\x20sales\x20data:','24282aLKNid','366ptyolZ','59645diNGIM','failedRows','length','stringify','üìå\x20Final\x20Data\x20Before\x20Processing:','SAP_PASSWORD','Matkl','Empty\x20response\x20from\x20API','Wgbez','Bztxt','MonthD','Bzirk','processedRows','status','env','üì¶\x20Processing\x20','3808peuAmZ','...','Zone','184cfIFWh','TotalInvoice','results','data','‚ö†Ô∏è\x20Received\x20empty\x20response\x20from\x20API','Database\x20error','\x20sales\x20data\x20entries...','‚úÖ\x20Sales\x20Data\x20Sync\x20Completed\x20Successfully','SAP\x20API\x20Error:\x20','message','1444180VNTfNp','error','32347fDWeaJ','log','../models/tagetValueModel','‚úÖ\x20Sales\x20data\x20synced\x20successfully','‚ö†Ô∏è\x20No\x20valid\x20sales\x20data\x20received.','üöÄ\x20Starting\x20Sales\x20Data\x20Sync...','config','json','warn','Gjahr','No\x20sales\x20data\x20found\x20in\x20SAP','slice','isArray','replace'];a7_0x4221=function(){return _0xa675a8;};return a7_0x4221();}