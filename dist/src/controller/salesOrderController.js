const a6_0x49997f=a6_0x4312;function a6_0x4312(_0x29dc27,_0x273f71){const _0x531469=a6_0x5314();return a6_0x4312=function(_0x4312b4,_0xce688a){_0x4312b4=_0x4312b4-0x11f;let _0x4604f4=_0x531469[_0x4312b4];return _0x4604f4;},a6_0x4312(_0x29dc27,_0x273f71);}(function(_0x2d5f49,_0x3af620){const _0x419872=a6_0x4312,_0x359709=_0x2d5f49();while(!![]){try{const _0x317805=-parseInt(_0x419872(0x135))/0x1+parseInt(_0x419872(0x146))/0x2+-parseInt(_0x419872(0x14d))/0x3*(-parseInt(_0x419872(0x133))/0x4)+parseInt(_0x419872(0x11f))/0x5*(-parseInt(_0x419872(0x12c))/0x6)+-parseInt(_0x419872(0x148))/0x7*(parseInt(_0x419872(0x159))/0x8)+-parseInt(_0x419872(0x167))/0x9+parseInt(_0x419872(0x136))/0xa;if(_0x317805===_0x3af620)break;else _0x359709['push'](_0x359709['shift']());}catch(_0x3f7c9d){_0x359709['push'](_0x359709['shift']());}}}(a6_0x5314,0xc887f));function a6_0x5314(){const _0x8ea0df=['Bzirk','failedRows','Kunnr','Matkl','‚ùå\x20API\x20Response\x20Format\x20Incorrect:','error','TotalInvoice','config','Sales_Order_API','6jlbgeb','Auart','length','json','slice','toString','üìå\x20Final\x20Data\x20Before\x20Insert/Update:','210452bicMwy','stringify','516486pZtSAD','22116280UcrAIh','Error\x20inserting\x20or\x20updating\x20sales\x20order\x20data','...','Empty\x20response\x20from\x20API','Netwr','message','Kursk','‚úÖ\x20Sales\x20Order\x20Data\x20Sync\x20Completed\x20Successfully','Matnr','Spart','Waerk','data','exports','Vkorg','Bztxt','toISOString','1188132jzimnU','Posnr','41146IajMqF','results','filter','Internal\x20Server\x20Error','Zone','9qPpDnf','‚úÖ\x20API\x20Response\x20Received.\x20Length:','isArray','Vtweg','Invalid\x20data\x20format\x20received\x20from\x20SAP','match','üîç\x20Fetching\x20Sales\x20Order\x20Data\x20from\x20API:','‚ùå\x20Skipping\x20invalid\x20entry\x20at\x20index\x20','status','../models/salesOrderModel','replace','Gjahr','584fxYUgE','‚úÖ\x20Sales\x20order\x20data\x20inserted/updated\x20successfully','0.00','üöÄ\x20Starting\x20Sales\x20Order\x20Data\x20Sync...','processedRows','split','Sales\x20orders\x20synced\x20successfully','log','application/json','SAP\x20API\x20Error:\x20','Erdat','\x20sales\x20orders\x20from\x20API','object','dotenv','9439848wAbrMu','Wgbez','738530kNYkUl','env','Database\x20error\x20occurred\x20while\x20inserting/updating\x20sales\x20orders.','Database\x20error'];a6_0x5314=function(){return _0x8ea0df;};return a6_0x5314();}const axios=require('axios'),{insertOrUpdateSalesOrders}=require(a6_0x49997f(0x156));require(a6_0x49997f(0x166))[a6_0x49997f(0x12a)]();const API_URL=process['env'][a6_0x49997f(0x12b)],convertSAPDateTime=_0x1d3ec3=>{const _0x48c40a=a6_0x49997f;if(!_0x1d3ec3)return null;const _0x310e69=_0x1d3ec3[_0x48c40a(0x152)](/\d+/);if(!_0x310e69)return null;const _0x5b004d=parseInt(_0x310e69[0x0],0xa),_0x5143e0=new Date(_0x5b004d);return _0x5143e0[_0x48c40a(0x145)]()['replace']('T','\x20')[_0x48c40a(0x15e)]('.')[0x0];},convertToDecimal=_0x3e9b01=>{const _0x235538=a6_0x49997f;if(!_0x3e9b01||isNaN(_0x3e9b01))return _0x235538(0x15b);return parseFloat(_0x3e9b01[_0x235538(0x131)]()[_0x235538(0x157)](',','.'))['toFixed'](0x2);},fetchSAPSalesOrders=async()=>{const _0x3a12a7=a6_0x49997f;try{console[_0x3a12a7(0x160)](_0x3a12a7(0x153),API_URL);const _0x11b306=await axios['get'](API_URL,{'auth':{'username':process[_0x3a12a7(0x120)]['SAP_USERNAME'],'password':process[_0x3a12a7(0x120)]['SAP_PASSWORD']},'headers':{'Accept':_0x3a12a7(0x161)}});if(!_0x11b306[_0x3a12a7(0x141)]){console['warn']('‚ö†Ô∏è\x20Received\x20empty\x20response\x20from\x20API');throw new Error(_0x3a12a7(0x139));}return console['log'](_0x3a12a7(0x14e),JSON['stringify'](_0x11b306['data'])[_0x3a12a7(0x12e)]),console[_0x3a12a7(0x160)]('üìå\x20API\x20Response\x20Data:',JSON[_0x3a12a7(0x134)](_0x11b306['data'],null,0x2)),_0x11b306[_0x3a12a7(0x141)];}catch(_0x4a899a){console[_0x3a12a7(0x128)]('‚ùå\x20Error\x20fetching\x20SAP\x20sales\x20order\x20data:',_0x4a899a[_0x3a12a7(0x13b)]);throw new Error(_0x3a12a7(0x162)+_0x4a899a[_0x3a12a7(0x13b)]);}},fetchAndStoreSalesOrders=async(_0x2bf11c,_0x17a9e4)=>{const _0xa50c0c=a6_0x49997f;try{console[_0xa50c0c(0x160)](_0xa50c0c(0x15c));const _0x1c021d=await fetchSAPSalesOrders();if(!_0x1c021d||typeof _0x1c021d!==_0xa50c0c(0x165)||!_0x1c021d['d']||!Array[_0xa50c0c(0x14f)](_0x1c021d['d']['results'])){console[_0xa50c0c(0x128)](_0xa50c0c(0x127),JSON[_0xa50c0c(0x134)](_0x1c021d)[_0xa50c0c(0x130)](0x0,0xa)+_0xa50c0c(0x138));if(_0x17a9e4)return _0x17a9e4[_0xa50c0c(0x155)](0x190)[_0xa50c0c(0x12f)]({'message':_0xa50c0c(0x151)});throw new Error(_0xa50c0c(0x151));}console[_0xa50c0c(0x160)]('üì¶\x20Received\x20'+_0x1c021d['d'][_0xa50c0c(0x149)]['length']+_0xa50c0c(0x164));const _0x59e139=_0x1c021d['d'][_0xa50c0c(0x149)]['map']((_0x33cbf6,_0x378461)=>{const _0x5e798a=_0xa50c0c;if(!_0x33cbf6||typeof _0x33cbf6!==_0x5e798a(0x165))return console[_0x5e798a(0x128)](_0x5e798a(0x154)+_0x378461+':',_0x33cbf6),null;return{'Vtweg':String(_0x33cbf6?.[_0x5e798a(0x150)]||''),'Posnr':String(_0x33cbf6?.[_0x5e798a(0x147)]||''),'Bzirk':String(_0x33cbf6?.[_0x5e798a(0x123)]||''),'Vbeln':String(_0x33cbf6?.['Vbeln']||''),'Spart':String(_0x33cbf6?.[_0x5e798a(0x13f)]||''),'Gjahr':parseInt(_0x33cbf6?.[_0x5e798a(0x158)])||null,'Bztxt':String(_0x33cbf6?.[_0x5e798a(0x144)]||''),'Vtext':String(_0x33cbf6?.['Vtext']||''),'PlannedOrder':convertToDecimal(_0x33cbf6?.['PlannedOrder']),'Kunnr':String(_0x33cbf6?.[_0x5e798a(0x125)]||''),'TotalInvoice':convertToDecimal(_0x33cbf6?.[_0x5e798a(0x129)]),'Erdat':convertSAPDateTime(_0x33cbf6?.[_0x5e798a(0x163)]),'Zone':String(_0x33cbf6?.[_0x5e798a(0x14c)]||''),'Auart':String(_0x33cbf6?.[_0x5e798a(0x12d)]||''),'Kursk':convertToDecimal(_0x33cbf6?.[_0x5e798a(0x13c)],0x5),'Vkorg':String(_0x33cbf6?.[_0x5e798a(0x143)]||''),'Netwr':convertToDecimal(_0x33cbf6?.[_0x5e798a(0x13a)],0x2),'Waerk':String(_0x33cbf6?.[_0x5e798a(0x140)]||''),'Matnr':String(_0x33cbf6?.[_0x5e798a(0x13e)]||''),'Matkl':String(_0x33cbf6?.[_0x5e798a(0x126)]||''),'Wgbez':String(_0x33cbf6?.[_0x5e798a(0x168)]||'')};})[_0xa50c0c(0x14a)](Boolean);console[_0xa50c0c(0x160)](_0xa50c0c(0x132),JSON['stringify'](_0x59e139,null,0x2));const _0x484179=await insertOrUpdateSalesOrders(_0x59e139);if(!_0x484179||typeof _0x484179!==_0xa50c0c(0x165)||!_0x484179['success']){console[_0xa50c0c(0x128)]('‚ùå\x20Error\x20processing\x20sales\x20order\x20data:',_0x484179?.[_0xa50c0c(0x128)]||'Unexpected\x20database\x20response');if(_0x17a9e4)return _0x17a9e4[_0xa50c0c(0x155)](0x1f4)[_0xa50c0c(0x12f)]({'message':_0xa50c0c(0x137),'error':_0x484179?.[_0xa50c0c(0x128)]||_0xa50c0c(0x122)});throw new Error(_0xa50c0c(0x121));}console[_0xa50c0c(0x160)](_0xa50c0c(0x13d));if(_0x17a9e4)return _0x17a9e4[_0xa50c0c(0x155)](0xc8)[_0xa50c0c(0x12f)]({'message':_0xa50c0c(0x15a),'insertedRows':_0x484179[_0xa50c0c(0x15d)]['length'],'updatedRows':_0x484179[_0xa50c0c(0x15d)]['length'],'failedRows':_0x484179[_0xa50c0c(0x124)]['length'],'errors':_0x484179[_0xa50c0c(0x124)]});return{'success':!![],'message':_0xa50c0c(0x15f)};}catch(_0x3180ad){return console['error']('‚ùå\x20Error\x20syncing\x20sales\x20order\x20data:',_0x3180ad['message']),_0x17a9e4?_0x17a9e4[_0xa50c0c(0x155)](0x1f4)[_0xa50c0c(0x12f)]({'message':_0xa50c0c(0x14b),'error':_0x3180ad[_0xa50c0c(0x13b)]}):{'success':![],'error':_0x3180ad[_0xa50c0c(0x13b)]};}};module[a6_0x49997f(0x142)]={'fetchAndStoreSalesOrders':fetchAndStoreSalesOrders};