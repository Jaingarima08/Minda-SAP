const a4_0x4ddff9=a4_0x5980;function a4_0x16b1(){const _0x5bc2c4=['5607765HGGSzz','processedRows','length','ðŸš€\x20Starting\x20group\x20Data\x20Sync...','results','failedRows','Matrl_GRP_API','ðŸ“¦\x20Received\x20','dotenv','json','1239826SgyJdi','20TxDNEO','axios','âŒ\x20Error\x20syncing\x20group\x20data:','âŒ\x20Error\x20fetching\x20SAP\x20group\x20data:','279uuJlDQ','\x20groups\x20from\x20API','status','âš ï¸\x20Received\x20empty\x20response\x20from\x20API','\x20group\x20Data\x20Sync\x20Completed\x20Successfully\x20','warn','Error\x20insering\x20or\x20updating\x20group\x20data','object','message','Spart','ðŸ”„\x20Processing\x20group\x20','1056138YeIXOj','9533910ALxSyB','stringify','SAP_PASSWORD','log','17904IFMZpQ','Database\x20error','âœ…\x20API\x20Response\x20Received.\x20Length:','data','ðŸ”\x20Fetching\x20group\x20Data\x20from\x20API:','filter','...','Unexpected\x20database\x20response','SAP_USERNAME','application/json','Empty\x20response\x20from\x20API','../models/Matrl_grpModel','167XazNcD','172930PsAXum','error','map','env','15275800WDYvEm','slice','config'];a4_0x16b1=function(){return _0x5bc2c4;};return a4_0x16b1();}(function(_0x32ccdb,_0x48a6e4){const _0x1f9159=a4_0x5980,_0x3e1b87=_0x32ccdb();while(!![]){try{const _0x430eff=parseInt(_0x1f9159(0x142))/0x1*(-parseInt(_0x1f9159(0x136))/0x2)+parseInt(_0x1f9159(0x164))/0x3*(parseInt(_0x1f9159(0x155))/0x4)+parseInt(_0x1f9159(0x14a))/0x5+-parseInt(_0x1f9159(0x165))/0x6+-parseInt(_0x1f9159(0x154))/0x7+parseInt(_0x1f9159(0x147))/0x8+parseInt(_0x1f9159(0x159))/0x9*(-parseInt(_0x1f9159(0x143))/0xa);if(_0x430eff===_0x48a6e4)break;else _0x3e1b87['push'](_0x3e1b87['shift']());}catch(_0x15725d){_0x3e1b87['push'](_0x3e1b87['shift']());}}}(a4_0x16b1,0xf2b28));const axios=require(a4_0x4ddff9(0x156)),{upsertgroup}=require(a4_0x4ddff9(0x141));function a4_0x5980(_0x8740a9,_0xeadd44){const _0x16b16c=a4_0x16b1();return a4_0x5980=function(_0x59800e,_0x3a04a9){_0x59800e=_0x59800e-0x134;let _0x2379be=_0x16b16c[_0x59800e];return _0x2379be;},a4_0x5980(_0x8740a9,_0xeadd44);}require(a4_0x4ddff9(0x152))[a4_0x4ddff9(0x149)]();const API_URL=process['env'][a4_0x4ddff9(0x150)],fetchSAPgroups=async()=>{const _0x404330=a4_0x4ddff9;try{console[_0x404330(0x135)](_0x404330(0x13a),API_URL);const _0x42d878=await axios['get'](API_URL,{'auth':{'username':process['env'][_0x404330(0x13e)],'password':process[_0x404330(0x146)][_0x404330(0x134)]},'headers':{'Accept':_0x404330(0x13f)},'responseType':'json'});if(!_0x42d878[_0x404330(0x139)]){console[_0x404330(0x15e)](_0x404330(0x15c));throw new Error(_0x404330(0x140));}return console[_0x404330(0x135)](_0x404330(0x138),JSON['stringify'](_0x42d878[_0x404330(0x139)])['length']),console['log']('\x20API\x20Response\x20Data:',JSON['stringify'](_0x42d878[_0x404330(0x139)],null,0x2)),_0x42d878['data'];}catch(_0x44f970){console[_0x404330(0x144)](_0x404330(0x158),_0x44f970['message']);throw new Error('SAP\x20API\x20Error:\x20'+_0x44f970[_0x404330(0x161)]);}},fetchAndStoregroups=async(_0x168e56,_0x11ab15)=>{const _0x1a52d1=a4_0x4ddff9;try{console[_0x1a52d1(0x135)](_0x1a52d1(0x14d));const _0x3a96fe=await fetchSAPgroups();if(!_0x3a96fe||typeof _0x3a96fe!==_0x1a52d1(0x160)||!_0x3a96fe['d']||!Array['isArray'](_0x3a96fe['d']['results']))return console[_0x1a52d1(0x144)]('âŒ\x20API\x20Response\x20Format\x20Incorrect:',JSON[_0x1a52d1(0x166)](_0x3a96fe)[_0x1a52d1(0x148)](0x0,0xa)+_0x1a52d1(0x13c)),_0x11ab15[_0x1a52d1(0x15b)](0x190)['json']({'message':'Invalid\x20data\x20format\x20received\x20from\x20SAP'});console[_0x1a52d1(0x135)](_0x1a52d1(0x151)+_0x3a96fe['d'][_0x1a52d1(0x14e)][_0x1a52d1(0x14c)]+_0x1a52d1(0x15a));const _0x39c329=_0x3a96fe['d'][_0x1a52d1(0x14e)][_0x1a52d1(0x145)]((_0x1ba637,_0x9bfa4)=>{const _0x1bdff7=_0x1a52d1;return console[_0x1bdff7(0x135)](_0x1bdff7(0x163)+(_0x9bfa4+0x1)+':',_0x1ba637['Matkl']),{'Matkl':String(_0x1ba637['Matkl']),'Spart':String(_0x1ba637[_0x1bdff7(0x162)])};})[_0x1a52d1(0x13b)](Boolean);console[_0x1a52d1(0x135)]('ðŸ“Œ\x20Final\x20Data\x20Before\x20Upsertion:',JSON[_0x1a52d1(0x166)](_0x39c329,null,0x2));const _0x2e2477=await upsertgroup(_0x39c329);if(!_0x2e2477||typeof _0x2e2477!==_0x1a52d1(0x160)||!_0x2e2477['success']){console[_0x1a52d1(0x144)]('\x20Error\x20inserted\x20or\x20updating\x20group\x20data:',_0x2e2477?.[_0x1a52d1(0x144)]||_0x1a52d1(0x13d));if(_0x11ab15)return _0x11ab15[_0x1a52d1(0x15b)](0x1f4)['json']({'message':_0x1a52d1(0x15f),'error':_0x2e2477?.[_0x1a52d1(0x144)]||_0x1a52d1(0x137)});return;}console[_0x1a52d1(0x135)](_0x1a52d1(0x15d));if(_0x11ab15)return _0x11ab15[_0x1a52d1(0x15b)](0xc8)[_0x1a52d1(0x153)]({'message':'\x20group\x20data\x20synced\x20successfully','insertedRows':_0x2e2477['processedRows'][_0x1a52d1(0x14c)],'updatedRows':_0x2e2477[_0x1a52d1(0x14b)][_0x1a52d1(0x14c)],'failedRows':_0x2e2477[_0x1a52d1(0x14f)][_0x1a52d1(0x14c)],'errors':_0x2e2477[_0x1a52d1(0x14f)]});}catch(_0x36d728){console[_0x1a52d1(0x144)](_0x1a52d1(0x157),_0x36d728[_0x1a52d1(0x161)]);if(_0x11ab15)return _0x11ab15[_0x1a52d1(0x15b)](0x1f4)[_0x1a52d1(0x153)]({'message':'Internal\x20Server\x20Error','error':_0x36d728[_0x1a52d1(0x161)]});}};module['exports']={'fetchAndStoregroups':fetchAndStoregroups};