const a4_0x1511fa=a4_0xa5ab;(function(_0x1ebe78,_0xfa6ef1){const _0x57ca36=a4_0xa5ab,_0x170415=_0x1ebe78();while(!![]){try{const _0x2983d4=-parseInt(_0x57ca36(0x148))/0x1+parseInt(_0x57ca36(0x12e))/0x2+-parseInt(_0x57ca36(0x130))/0x3*(-parseInt(_0x57ca36(0x132))/0x4)+-parseInt(_0x57ca36(0x142))/0x5+parseInt(_0x57ca36(0x145))/0x6+-parseInt(_0x57ca36(0x14e))/0x7+parseInt(_0x57ca36(0x13e))/0x8;if(_0x2983d4===_0xfa6ef1)break;else _0x170415['push'](_0x170415['shift']());}catch(_0x425e50){_0x170415['push'](_0x170415['shift']());}}}(a4_0x5b59,0xee5c8));const axios=require(a4_0x1511fa(0x14b)),{upsertgroup}=require(a4_0x1511fa(0x159));function a4_0xa5ab(_0x5d492b,_0x1f6740){const _0x5b592a=a4_0x5b59();return a4_0xa5ab=function(_0xa5ab0f,_0x28002d){_0xa5ab0f=_0xa5ab0f-0x12b;let _0x17e383=_0x5b592a[_0xa5ab0f];return _0x17e383;},a4_0xa5ab(_0x5d492b,_0x1f6740);}require(a4_0x1511fa(0x158))[a4_0x1511fa(0x15a)]();function a4_0x5b59(){const _0x1c05ae=['log','error','Internal\x20Server\x20Error','\x20group\x20data\x20synced\x20successfully','üöÄ\x20Starting\x20group\x20Data\x20Sync...','dotenv','../models/Matrl_grpModel','config','results','Error\x20insering\x20or\x20updating\x20group\x20data','processedRows','success','application/json','532974kvWSdm','map','489009sIjJVj','json','28whvISZ','üì¶\x20Received\x20','object','env','SAP\x20API\x20Error:\x20','data','üîÑ\x20Processing\x20group\x20','status','‚ùå\x20API\x20Response\x20Format\x20Incorrect:','failedRows','Spart','\x20Error\x20inserted\x20or\x20updating\x20group\x20data:','34304824VYLCtJ','message','Database\x20error','Empty\x20response\x20from\x20API','8639060szMGZv','stringify','Invalid\x20data\x20format\x20received\x20from\x20SAP','652218AHjMhR','filter','\x20API\x20Response\x20Data:','1370491izyoZp','Matkl','Unexpected\x20database\x20response','axios','exports','length','12107781dJZjJy','Matrl_GRP_API','warn','‚ö†Ô∏è\x20Received\x20empty\x20response\x20from\x20API','SAP_USERNAME'];a4_0x5b59=function(){return _0x1c05ae;};return a4_0x5b59();}const API_URL=process[a4_0x1511fa(0x135)][a4_0x1511fa(0x14f)],fetchSAPgroups=async()=>{const _0x30dd31=a4_0x1511fa;try{console['log']('üîç\x20Fetching\x20group\x20Data\x20from\x20API:',API_URL);const _0x1a3563=await axios['get'](API_URL,{'auth':{'username':process[_0x30dd31(0x135)][_0x30dd31(0x152)],'password':process[_0x30dd31(0x135)]['SAP_PASSWORD']},'headers':{'Accept':_0x30dd31(0x12d)},'responseType':_0x30dd31(0x131)});if(!_0x1a3563[_0x30dd31(0x137)]){console[_0x30dd31(0x150)](_0x30dd31(0x151));throw new Error(_0x30dd31(0x141));}return console[_0x30dd31(0x153)]('‚úÖ\x20API\x20Response\x20Received.\x20Length:',JSON[_0x30dd31(0x143)](_0x1a3563[_0x30dd31(0x137)])[_0x30dd31(0x14d)]),console[_0x30dd31(0x153)](_0x30dd31(0x147),JSON[_0x30dd31(0x143)](_0x1a3563[_0x30dd31(0x137)],null,0x2)),_0x1a3563['data'];}catch(_0xe65506){console['error']('‚ùå\x20Error\x20fetching\x20SAP\x20group\x20data:',_0xe65506[_0x30dd31(0x13f)]);throw new Error(_0x30dd31(0x136)+_0xe65506[_0x30dd31(0x13f)]);}},fetchAndStoregroups=async(_0xb32ca7,_0x1c28e9)=>{const _0x7fa690=a4_0x1511fa;try{console['log'](_0x7fa690(0x157));const _0x20d22d=await fetchSAPgroups();if(!_0x20d22d||typeof _0x20d22d!==_0x7fa690(0x134)||!_0x20d22d['d']||!Array['isArray'](_0x20d22d['d'][_0x7fa690(0x15b)]))return console[_0x7fa690(0x154)](_0x7fa690(0x13a),JSON[_0x7fa690(0x143)](_0x20d22d)['slice'](0x0,0xa)+'...'),_0x1c28e9[_0x7fa690(0x139)](0x190)[_0x7fa690(0x131)]({'message':_0x7fa690(0x144)});console['log'](_0x7fa690(0x133)+_0x20d22d['d'][_0x7fa690(0x15b)]['length']+'\x20groups\x20from\x20API');const _0x23525d=_0x20d22d['d'][_0x7fa690(0x15b)][_0x7fa690(0x12f)]((_0x31ef03,_0x4b105c)=>{const _0x102239=_0x7fa690;return console[_0x102239(0x153)](_0x102239(0x138)+(_0x4b105c+0x1)+':',_0x31ef03[_0x102239(0x149)]),{'Matkl':String(_0x31ef03[_0x102239(0x149)]),'Spart':String(_0x31ef03[_0x102239(0x13c)])};})[_0x7fa690(0x146)](Boolean);console[_0x7fa690(0x153)]('üìå\x20Final\x20Data\x20Before\x20Upsertion:',JSON['stringify'](_0x23525d,null,0x2));const _0x3d1efe=await upsertgroup(_0x23525d);if(!_0x3d1efe||typeof _0x3d1efe!==_0x7fa690(0x134)||!_0x3d1efe[_0x7fa690(0x12c)]){console['error'](_0x7fa690(0x13d),_0x3d1efe?.[_0x7fa690(0x154)]||_0x7fa690(0x14a));if(_0x1c28e9)return _0x1c28e9['status'](0x1f4)['json']({'message':_0x7fa690(0x15c),'error':_0x3d1efe?.[_0x7fa690(0x154)]||_0x7fa690(0x140)});return;}console[_0x7fa690(0x153)]('\x20group\x20Data\x20Sync\x20Completed\x20Successfully\x20');if(_0x1c28e9)return _0x1c28e9[_0x7fa690(0x139)](0xc8)[_0x7fa690(0x131)]({'message':_0x7fa690(0x156),'insertedRows':_0x3d1efe[_0x7fa690(0x12b)]['length'],'updatedRows':_0x3d1efe[_0x7fa690(0x12b)]['length'],'failedRows':_0x3d1efe[_0x7fa690(0x13b)][_0x7fa690(0x14d)],'errors':_0x3d1efe['failedRows']});}catch(_0x8f14f3){console[_0x7fa690(0x154)]('‚ùå\x20Error\x20syncing\x20group\x20data:',_0x8f14f3[_0x7fa690(0x13f)]);if(_0x1c28e9)return _0x1c28e9[_0x7fa690(0x139)](0x1f4)[_0x7fa690(0x131)]({'message':_0x7fa690(0x155),'error':_0x8f14f3[_0x7fa690(0x13f)]});}};module[a4_0x1511fa(0x14c)]={'fetchAndStoregroups':fetchAndStoregroups};