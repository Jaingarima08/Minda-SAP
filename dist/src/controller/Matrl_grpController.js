const a4_0xfc43d=a4_0x238e;(function(_0x4ee38d,_0x3f17ea){const _0x4d182e=a4_0x238e,_0x14a0f5=_0x4ee38d();while(!![]){try{const _0x32b8ce=-parseInt(_0x4d182e(0x117))/0x1+-parseInt(_0x4d182e(0x115))/0x2*(parseInt(_0x4d182e(0x116))/0x3)+parseInt(_0x4d182e(0x128))/0x4*(-parseInt(_0x4d182e(0xfc))/0x5)+parseInt(_0x4d182e(0x11a))/0x6+-parseInt(_0x4d182e(0x107))/0x7+parseInt(_0x4d182e(0x125))/0x8+-parseInt(_0x4d182e(0x108))/0x9*(-parseInt(_0x4d182e(0xfb))/0xa);if(_0x32b8ce===_0x3f17ea)break;else _0x14a0f5['push'](_0x14a0f5['shift']());}catch(_0x3fd08a){_0x14a0f5['push'](_0x14a0f5['shift']());}}}(a4_0x1624,0xabb70));function a4_0x238e(_0x34a162,_0x332f63){const _0x1624b3=a4_0x1624();return a4_0x238e=function(_0x238ee7,_0x95ad15){_0x238ee7=_0x238ee7-0xf9;let _0x3e4345=_0x1624b3[_0x238ee7];return _0x3e4345;},a4_0x238e(_0x34a162,_0x332f63);}const axios=require(a4_0xfc43d(0x109)),{upsertgroup}=require('../models/Matrl_grpModel');require(a4_0xfc43d(0x12a))[a4_0xfc43d(0xf9)]();const API_URL=process['env'][a4_0xfc43d(0x111)],fetchSAPgroups=async()=>{const _0x4dc1a3=a4_0xfc43d;try{console['log'](_0x4dc1a3(0x11e),API_URL);const _0x104e15=await axios[_0x4dc1a3(0x127)](API_URL,{'auth':{'username':process[_0x4dc1a3(0x112)]['SAP_USERNAME'],'password':process[_0x4dc1a3(0x112)]['SAP_PASSWORD']},'headers':{'Accept':_0x4dc1a3(0x11c)},'responseType':'json'});if(!_0x104e15['data']){console['warn'](_0x4dc1a3(0x11f));throw new Error(_0x4dc1a3(0x100));}return console[_0x4dc1a3(0x123)](_0x4dc1a3(0x102),JSON[_0x4dc1a3(0x10d)](_0x104e15['data'])[_0x4dc1a3(0x122)]),console[_0x4dc1a3(0x123)](_0x4dc1a3(0xfd),JSON[_0x4dc1a3(0x10d)](_0x104e15[_0x4dc1a3(0x114)],null,0x2)),_0x104e15[_0x4dc1a3(0x114)];}catch(_0x76136d){console[_0x4dc1a3(0x129)](_0x4dc1a3(0x12d),_0x76136d[_0x4dc1a3(0x12f)]);throw new Error(_0x4dc1a3(0x10c)+_0x76136d[_0x4dc1a3(0x12f)]);}},fetchAndStoregroups=async(_0x43a5ad,_0x199dc9)=>{const _0x5d0272=a4_0xfc43d;try{console[_0x5d0272(0x123)](_0x5d0272(0x113));const _0x310e3f=await fetchSAPgroups();if(!_0x310e3f||typeof _0x310e3f!=='object'||!_0x310e3f['d']||!Array[_0x5d0272(0x121)](_0x310e3f['d']['results']))return console[_0x5d0272(0x129)](_0x5d0272(0x124),JSON[_0x5d0272(0x10d)](_0x310e3f)[_0x5d0272(0x126)](0x0,0xa)+_0x5d0272(0xfe)),_0x199dc9[_0x5d0272(0x10a)](0x190)[_0x5d0272(0x11d)]({'message':_0x5d0272(0x10b)});console[_0x5d0272(0x123)](_0x5d0272(0xfa)+_0x310e3f['d']['results']['length']+'\x20groups\x20from\x20API');const _0x407c6f=_0x310e3f['d'][_0x5d0272(0x105)][_0x5d0272(0x119)]((_0x4ba33c,_0xfad5e)=>{const _0x5a8205=_0x5d0272;return console[_0x5a8205(0x123)](_0x5a8205(0x103)+(_0xfad5e+0x1)+':',_0x4ba33c[_0x5a8205(0x118)]),{'Matkl':String(_0x4ba33c[_0x5a8205(0x118)]),'Spart':String(_0x4ba33c[_0x5a8205(0x110)])};})[_0x5d0272(0x10e)](Boolean);console[_0x5d0272(0x123)](_0x5d0272(0x104),JSON[_0x5d0272(0x10d)](_0x407c6f,null,0x2));const _0x3a1e1e=await upsertgroup(_0x407c6f);if(!_0x3a1e1e||typeof _0x3a1e1e!==_0x5d0272(0x12b)||!_0x3a1e1e[_0x5d0272(0x10f)]){console['error'](_0x5d0272(0x12e),_0x3a1e1e?.['error']||'Unexpected\x20database\x20response');if(_0x199dc9)return _0x199dc9[_0x5d0272(0x10a)](0x1f4)['json']({'message':'Error\x20insering\x20or\x20updating\x20group\x20data','error':_0x3a1e1e?.['error']||_0x5d0272(0x101)});return;}console[_0x5d0272(0x123)](_0x5d0272(0x130));if(_0x199dc9)return _0x199dc9['status'](0xc8)[_0x5d0272(0x11d)]({'message':'\x20group\x20data\x20synced\x20successfully','insertedRows':_0x3a1e1e['processedRows']['length'],'updatedRows':_0x3a1e1e[_0x5d0272(0x11b)][_0x5d0272(0x122)],'failedRows':_0x3a1e1e[_0x5d0272(0x106)][_0x5d0272(0x122)],'errors':_0x3a1e1e['failedRows']});}catch(_0x55c4d7){console[_0x5d0272(0x129)](_0x5d0272(0x120),_0x55c4d7[_0x5d0272(0x12f)]);if(_0x199dc9)return _0x199dc9[_0x5d0272(0x10a)](0x1f4)[_0x5d0272(0x11d)]({'message':_0x5d0272(0xff),'error':_0x55c4d7[_0x5d0272(0x12f)]});}};function a4_0x1624(){const _0x10587b=['slice','get','328404GtlrDV','error','dotenv','object','exports','‚ùå\x20Error\x20fetching\x20SAP\x20group\x20data:','\x20Error\x20inserted\x20or\x20updating\x20group\x20data:','message','\x20group\x20Data\x20Sync\x20Completed\x20Successfully\x20','config','üì¶\x20Received\x20','650kZasfz','35PIWsAN','\x20API\x20Response\x20Data:','...','Internal\x20Server\x20Error','Empty\x20response\x20from\x20API','Database\x20error','‚úÖ\x20API\x20Response\x20Received.\x20Length:','üîÑ\x20Processing\x20group\x20','üìå\x20Final\x20Data\x20Before\x20Upsertion:','results','failedRows','1495557OFewVf','235719nklseq','axios','status','Invalid\x20data\x20format\x20received\x20from\x20SAP','SAP\x20API\x20Error:\x20','stringify','filter','success','Spart','Matrl_GRP_API','env','üöÄ\x20Starting\x20group\x20Data\x20Sync...','data','530746BLJbNT','12raoSxo','729360xOJTHP','Matkl','map','7657944AJupQY','processedRows','application/json','json','üîç\x20Fetching\x20group\x20Data\x20from\x20API:','‚ö†Ô∏è\x20Received\x20empty\x20response\x20from\x20API','‚ùå\x20Error\x20syncing\x20group\x20data:','isArray','length','log','‚ùå\x20API\x20Response\x20Format\x20Incorrect:','2430520LBHACZ'];a4_0x1624=function(){return _0x10587b;};return a4_0x1624();}module[a4_0xfc43d(0x12c)]={'fetchAndStoregroups':fetchAndStoregroups};