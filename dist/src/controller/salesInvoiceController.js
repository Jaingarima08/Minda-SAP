function a5_0xb317(_0x423db6,_0x273eed){const _0x424fa3=a5_0x424f();return a5_0xb317=function(_0xb317b7,_0x49b024){_0xb317b7=_0xb317b7-0x17c;let _0x45d441=_0x424fa3[_0xb317b7];return _0x45d441;},a5_0xb317(_0x423db6,_0x273eed);}const a5_0x515280=a5_0xb317;(function(_0x50f632,_0x226b3f){const _0x25ae83=a5_0xb317,_0x5eb116=_0x50f632();while(!![]){try{const _0x1fc100=parseInt(_0x25ae83(0x18c))/0x1*(parseInt(_0x25ae83(0x180))/0x2)+parseInt(_0x25ae83(0x199))/0x3*(-parseInt(_0x25ae83(0x1ac))/0x4)+parseInt(_0x25ae83(0x1b1))/0x5*(parseInt(_0x25ae83(0x1b4))/0x6)+parseInt(_0x25ae83(0x1bb))/0x7+-parseInt(_0x25ae83(0x1c3))/0x8*(parseInt(_0x25ae83(0x18b))/0x9)+-parseInt(_0x25ae83(0x190))/0xa*(-parseInt(_0x25ae83(0x19e))/0xb)+parseInt(_0x25ae83(0x182))/0xc*(parseInt(_0x25ae83(0x17d))/0xd);if(_0x1fc100===_0x226b3f)break;else _0x5eb116['push'](_0x5eb116['shift']());}catch(_0x29f0d8){_0x5eb116['push'](_0x5eb116['shift']());}}}(a5_0x424f,0x768b0));const axios=require(a5_0x515280(0x1a1)),{insertOrUpdateSalesInvoices}=require(a5_0x515280(0x189));require(a5_0x515280(0x17e))[a5_0x515280(0x1c7)]();function a5_0x424f(){const _0x5037fa=['âŒ\x20Error\x20inserting\x20or\x20updating\x20sales\x20invoice\x20data:','\x20sales\x20invoices...','...','isArray','âš ï¸\x20Received\x20empty\x20response\x20from\x20API','146817CGCslf','Fkart','getMinutes','status','Aubel','11FWDzsU','padStart','Werks','axios','replace','TotalInvoice','SAP_PASSWORD','Fkdat','ðŸ“Œ\x20Final\x20Processed\x20Invoices:','Netwr','Matnr','SAP_USERNAME','results','Fktyp','8qyQPsF','Zone','Waerk','âŒ\x20Skipping\x20invalid\x20invoice\x20at\x20index\x20','get','140IgrKuy','log','Empty\x20response\x20from\x20API','84954iKtQCC','MonthDesc','filter','Vtweg','Aupos','No\x20sales\x20invoice\x20data\x20found\x20in\x20SAP','âš ï¸\x20No\x20valid\x20sales\x20invoice\x20data\x20received.','2780316CNcDga','Kunag','json','failedRows','âŒ\x20Error\x20fetching\x20SAP\x20sales\x20invoice\x20data:','ðŸš€\x20Starting\x20Sales\x20Invoice\x20Data\x20Sync...','Bzirk','data','52912POpsNy','âŒ\x20Error\x20syncing\x20sales\x20invoice\x20data:','getHours','Vkorg','config','processedRows','exports','slice','env','object','message','SAP\x20API\x20Error:\x20','\x20sales\x20invoices','Error\x20inserting\x20or\x20updating\x20sales\x20invoice\x20data','getMonth','13cQQOQV','dotenv','Wgbez','44054gBsyZG','ðŸ“¦\x20Processing\x20','646872WkwHbg','ðŸ”\x20Fetching\x20Sales\x20Invoice\x20Data\x20from\x20API:','success','âœ…\x20Sales\x20Invoice\x20Data\x20Sync\x20Completed\x20Successfully','length','âœ…\x20API\x20Response\x20Received.\x20Length:','error','../models/salesInvoiceModel','Unexpected\x20database\x20response','837nChaNY','11GBFRbK','Sales_invoice_API','warn','PlannedOrder','1086890pirJJM','Internal\x20Server\x20Error','toString','stringify'];a5_0x424f=function(){return _0x5037fa;};return a5_0x424f();}const API_URL=process['env'][a5_0x515280(0x18d)],convertSAPDateTime=_0x9b0f1=>{const _0x5170e6=a5_0x515280;if(!_0x9b0f1||typeof _0x9b0f1!=='string')return null;const _0x221121=_0x9b0f1['match'](/\/Date\((\d+)(?:[+-]\d+)?\)\//);if(!_0x221121)return null;const _0x27fbc8=parseInt(_0x221121[0x1],0xa),_0x5d9a1f=new Date(_0x27fbc8),_0x578b1c=_0x1ce8e6=>_0x1ce8e6[_0x5170e6(0x192)]()[_0x5170e6(0x19f)](0x2,'0'),_0x24a392=_0x5d9a1f['getFullYear']()+'-'+_0x578b1c(_0x5d9a1f[_0x5170e6(0x17c)]()+0x1)+'-'+_0x578b1c(_0x5d9a1f['getDate']())+'\x20'+(_0x578b1c(_0x5d9a1f[_0x5170e6(0x1c5)]())+':'+_0x578b1c(_0x5d9a1f[_0x5170e6(0x19b)]())+':'+_0x578b1c(_0x5d9a1f['getSeconds']()));return _0x24a392;},convertToDecimal=_0x3f6f9a=>{const _0x35afd5=a5_0x515280;if(!_0x3f6f9a||isNaN(_0x3f6f9a))return 0x0;return parseFloat(_0x3f6f9a[_0x35afd5(0x192)]()[_0x35afd5(0x1a2)](',','.'));},fetchSAPSalesInvoices=async()=>{const _0x2fe186=a5_0x515280;try{console[_0x2fe186(0x1b2)](_0x2fe186(0x183),API_URL);const _0x3de109=await axios[_0x2fe186(0x1b0)](API_URL,{'auth':{'username':process['env'][_0x2fe186(0x1a9)],'password':process[_0x2fe186(0x1cb)][_0x2fe186(0x1a4)]},'headers':{'Accept':'application/json'},'responseType':'json'});if(!_0x3de109[_0x2fe186(0x1c2)]){console[_0x2fe186(0x18e)](_0x2fe186(0x198));throw new Error(_0x2fe186(0x1b3));}console[_0x2fe186(0x1b2)](_0x2fe186(0x187),JSON[_0x2fe186(0x193)](_0x3de109[_0x2fe186(0x1c2)])['length']),console[_0x2fe186(0x1b2)]('ðŸ“Œ\x20API\x20Response\x20Data:',JSON['stringify'](_0x3de109[_0x2fe186(0x1c2)],null,0x2));if(!_0x3de109[_0x2fe186(0x1c2)]['d']||!Array['isArray'](_0x3de109[_0x2fe186(0x1c2)]['d'][_0x2fe186(0x1aa)])){console[_0x2fe186(0x188)]('âŒ\x20API\x20Response\x20Format\x20Incorrect:',JSON['stringify'](_0x3de109['data'])[_0x2fe186(0x1ca)](0x0,0xc8)+_0x2fe186(0x196));throw new Error('Invalid\x20data\x20format\x20received\x20from\x20SAP');}const _0x58509d=_0x3de109[_0x2fe186(0x1c2)]['d'][_0x2fe186(0x1aa)]||[];return console[_0x2fe186(0x1b2)]('ðŸ“¦\x20Received\x20'+_0x58509d[_0x2fe186(0x186)]+_0x2fe186(0x1cf)),_0x58509d;}catch(_0x13b4ad){console[_0x2fe186(0x188)](_0x2fe186(0x1bf),_0x13b4ad['message']);throw new Error(_0x2fe186(0x1ce)+_0x13b4ad[_0x2fe186(0x1cd)]);}},fetchAndStoreSalesInvoices=async(_0x1faadc,_0xd7952c)=>{const _0x1fc2e7=a5_0x515280;try{console[_0x1fc2e7(0x1b2)](_0x1fc2e7(0x1c0));const _0x2208a1=await fetchSAPSalesInvoices();if(!Array[_0x1fc2e7(0x197)](_0x2208a1)||_0x2208a1[_0x1fc2e7(0x186)]===0x0){console[_0x1fc2e7(0x18e)](_0x1fc2e7(0x1ba));if(_0xd7952c)return _0xd7952c[_0x1fc2e7(0x19c)](0x190)[_0x1fc2e7(0x1bd)]({'message':_0x1fc2e7(0x1b9)});return;}console[_0x1fc2e7(0x1b2)](_0x1fc2e7(0x181)+_0x2208a1[_0x1fc2e7(0x186)]+_0x1fc2e7(0x195));const _0x3e0b66=_0x2208a1['map']((_0x27a447,_0x44fe9c)=>{const _0x111805=_0x1fc2e7;if(!_0x27a447||typeof _0x27a447!==_0x111805(0x1cc))return console[_0x111805(0x188)](_0x111805(0x1af)+_0x44fe9c+':',_0x27a447),null;return{'Vbeln':String(_0x27a447?.['Vbeln']||''),'Posnr':String(_0x27a447?.['Posnr']||''),'Matnr':String(_0x27a447?.[_0x111805(0x1a8)]||''),'PlannedOrder':convertToDecimal(_0x27a447?.[_0x111805(0x18f)]),'Wgbez':String(_0x27a447?.[_0x111805(0x17f)]||''),'Bzirk':String(_0x27a447?.[_0x111805(0x1c1)]||''),'Netwr':convertToDecimal(_0x27a447?.[_0x111805(0x1a7)]),'Vtweg':String(_0x27a447?.[_0x111805(0x1b7)]||''),'Matkl':String(_0x27a447?.['Matkl']||''),'TotalInvoice':convertToDecimal(_0x27a447?.[_0x111805(0x1a3)]),'Spart':String(_0x27a447?.['Spart']||''),'Zone':String(_0x27a447?.[_0x111805(0x1ad)]||''),'Fkart':String(_0x27a447?.[_0x111805(0x19a)]||''),'Kunag':String(_0x27a447?.[_0x111805(0x1bc)]||''),'Fktyp':String(_0x27a447?.[_0x111805(0x1ab)]||''),'Aupos':String(_0x27a447?.[_0x111805(0x1b8)]||''),'Werks':String(_0x27a447?.[_0x111805(0x1a0)]||''),'Vkorg':String(_0x27a447?.[_0x111805(0x1c6)]||''),'Waerk':String(_0x27a447?.[_0x111805(0x1ae)]||''),'Gjahr':String(_0x27a447?.['Gjahr']||''),'Fkdat':convertSAPDateTime(_0x27a447?.[_0x111805(0x1a5)]),'Aubel':String(_0x27a447?.[_0x111805(0x19d)]||''),'MonthD':String(_0x27a447?.['MonthD']||''),'MonthDesc':String(_0x27a447?.[_0x111805(0x1b5)]||'')};})[_0x1fc2e7(0x1b6)](Boolean);console['log'](_0x1fc2e7(0x1a6),JSON[_0x1fc2e7(0x193)](_0x3e0b66,null,0x2));const _0x2ddda8=await insertOrUpdateSalesInvoices(_0x3e0b66);if(!_0x2ddda8||typeof _0x2ddda8!==_0x1fc2e7(0x1cc)||!_0x2ddda8[_0x1fc2e7(0x184)]){console[_0x1fc2e7(0x188)](_0x1fc2e7(0x194),_0x2ddda8?.['error']||_0x1fc2e7(0x18a));if(_0xd7952c)return _0xd7952c['status'](0x1f4)[_0x1fc2e7(0x1bd)]({'message':_0x1fc2e7(0x1d0),'error':_0x2ddda8?.[_0x1fc2e7(0x188)]||'Database\x20error'});return;}console[_0x1fc2e7(0x1b2)](_0x1fc2e7(0x185));if(_0xd7952c)return _0xd7952c['status'](0xc8)['json']({'message':'âœ…\x20Sales\x20invoice\x20data\x20synced\x20successfully','insertedRows':_0x2ddda8[_0x1fc2e7(0x1c8)][_0x1fc2e7(0x186)],'updatedRows':_0x2ddda8['processedRows'][_0x1fc2e7(0x186)],'failedRows':_0x2ddda8[_0x1fc2e7(0x1be)][_0x1fc2e7(0x186)],'errors':_0x2ddda8[_0x1fc2e7(0x1be)]});}catch(_0x58233b){console[_0x1fc2e7(0x188)](_0x1fc2e7(0x1c4),_0x58233b[_0x1fc2e7(0x1cd)]);if(_0xd7952c)return _0xd7952c['status'](0x1f4)[_0x1fc2e7(0x1bd)]({'message':_0x1fc2e7(0x191),'error':_0x58233b[_0x1fc2e7(0x1cd)]});}};module[a5_0x515280(0x1c9)]={'fetchAndStoreSalesInvoices':fetchAndStoreSalesInvoices};