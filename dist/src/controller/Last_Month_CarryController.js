function a3_0x1f27(){const _0x458c4c=['Fkimg','Last_Month_API','MonthD','SAP_USERNAME','ðŸ”\x20Fetching\x20Last\x20Month\x20Carry\x20Data\x20from\x20API:','data','âŒ\x20Invalid\x20API\x20Response\x20Format:','OdrVal','exports','log','Aubel','âŒ\x20Skipping\x20invalid\x20record\x20at\x20index\x20','Invalid\x20data\x20format\x20received\x20from\x20SAP','warn','52136BfgnsL','Internal\x20Server\x20Error','Matkl','../models/Last_Month_CarryModel','âŒ\x20Error\x20syncing\x20data:','json','stringify','Waerk','ðŸš€\x20Starting\x20Last\x20Month\x20Carry\x20Data\x20Sync...','message','âŒ\x20Error\x20fetching\x20Last\x20Month\x20Carry\x20data:','No\x20Last\x20Month\x20Carry\x20data\x20found\x20in\x20SAP','Posnr','\x20records','Spart','410610SraDyL','9siZmpn','540YAnuSp','ðŸ“¦\x20Processing\x20','6733386byjnia','ðŸ“Œ\x20API\x20Response\x20Data:','error','Fktyp','SAP\x20API\x20Error:\x20','Empty\x20response\x20from\x20API','136PmbAHs','isArray','config','Vkorg','env','status','processedRows','results','15WYOmyG','failedRows','Zone','Kwmeng','429nUPgaP','Bzirk','\x20records...','Kunnr','7545830mzdwKm','198008EvSNza','âŒ\x20Error\x20inserting\x20or\x20updating\x20data:','PendingQty','filter','dotenv','763317KkDYoY','length','Database\x20error','Gjahr','map','object','ðŸ“¦\x20Received\x20','Netwr','toString','âœ…\x20Last\x20Month\x20Carry\x20Data\x20Sync\x20Completed\x20Successfully','âœ…\x20Last\x20month\x20carry\x20data\x20synced\x20successfully','âš ï¸\x20Received\x20empty\x20response\x20from\x20API'];a3_0x1f27=function(){return _0x458c4c;};return a3_0x1f27();}const a3_0x27dc20=a3_0x1a5f;function a3_0x1a5f(_0x5c9489,_0x188943){const _0x1f2748=a3_0x1f27();return a3_0x1a5f=function(_0x1a5f97,_0x110ac7){_0x1a5f97=_0x1a5f97-0x19d;let _0x5c24db=_0x1f2748[_0x1a5f97];return _0x5c24db;},a3_0x1a5f(_0x5c9489,_0x188943);}(function(_0x57f42a,_0x30036e){const _0x2cbf4e=a3_0x1a5f,_0x4d1c77=_0x57f42a();while(!![]){try{const _0x44b9e8=parseInt(_0x2cbf4e(0x1af))/0x1+-parseInt(_0x2cbf4e(0x1aa))/0x2+parseInt(_0x2cbf4e(0x1a5))/0x3*(-parseInt(_0x2cbf4e(0x1da))/0x4)+-parseInt(_0x2cbf4e(0x1a1))/0x5*(-parseInt(_0x2cbf4e(0x1d8))/0x6)+parseInt(_0x2cbf4e(0x1c9))/0x7*(-parseInt(_0x2cbf4e(0x1e2))/0x8)+-parseInt(_0x2cbf4e(0x1d9))/0x9*(parseInt(_0x2cbf4e(0x1a9))/0xa)+parseInt(_0x2cbf4e(0x1dc))/0xb;if(_0x44b9e8===_0x30036e)break;else _0x4d1c77['push'](_0x4d1c77['shift']());}catch(_0x149e18){_0x4d1c77['push'](_0x4d1c77['shift']());}}}(a3_0x1f27,0x8de78));const axios=require('axios'),{insertOrUpdateLastMonthCarry}=require(a3_0x27dc20(0x1cc));require(a3_0x27dc20(0x1ae))[a3_0x27dc20(0x1e4)]();const API_URL=process['env'][a3_0x27dc20(0x1bc)],convertToDecimal=_0xe08ebc=>{const _0x1731d3=a3_0x27dc20;if(!_0xe08ebc||isNaN(_0xe08ebc))return 0x0;return parseFloat(_0xe08ebc[_0x1731d3(0x1b7)]()['replace'](',','.'));},fetchSAPLastMonthCarry=async()=>{const _0x1ca8d1=a3_0x27dc20;try{console[_0x1ca8d1(0x1c4)](_0x1ca8d1(0x1bf),API_URL);const _0xe766ee=await axios['get'](API_URL,{'auth':{'username':process[_0x1ca8d1(0x19d)][_0x1ca8d1(0x1be)],'password':process[_0x1ca8d1(0x19d)]['SAP_PASSWORD']},'headers':{'Accept':'application/json'},'responseType':_0x1ca8d1(0x1ce)});if(!_0xe766ee[_0x1ca8d1(0x1c0)]){console[_0x1ca8d1(0x1c8)](_0x1ca8d1(0x1ba));throw new Error(_0x1ca8d1(0x1e1));}console[_0x1ca8d1(0x1c4)]('âœ…\x20API\x20Response\x20Received.\x20Length:',JSON[_0x1ca8d1(0x1cf)](_0xe766ee[_0x1ca8d1(0x1c0)])[_0x1ca8d1(0x1b0)]),console[_0x1ca8d1(0x1c4)](_0x1ca8d1(0x1dd),JSON[_0x1ca8d1(0x1cf)](_0xe766ee[_0x1ca8d1(0x1c0)],null,0x2));if(!_0xe766ee['data']['d']||!Array['isArray'](_0xe766ee[_0x1ca8d1(0x1c0)]['d'][_0x1ca8d1(0x1a0)])){console[_0x1ca8d1(0x1de)](_0x1ca8d1(0x1c1),JSON[_0x1ca8d1(0x1cf)](_0xe766ee[_0x1ca8d1(0x1c0)])['slice'](0x0,0xc8));throw new Error(_0x1ca8d1(0x1c7));}const _0xe01030=_0xe766ee[_0x1ca8d1(0x1c0)]['d']['results']||[];return console['log'](_0x1ca8d1(0x1b5)+_0xe01030['length']+_0x1ca8d1(0x1d6)),_0xe01030;}catch(_0x5dd727){console[_0x1ca8d1(0x1de)](_0x1ca8d1(0x1d3),_0x5dd727[_0x1ca8d1(0x1d2)]);throw new Error(_0x1ca8d1(0x1e0)+_0x5dd727['message']);}},fetchAndStoreLastMonthCarry=async(_0xf6e4e5,_0x5107c9)=>{const _0x153681=a3_0x27dc20;try{console[_0x153681(0x1c4)](_0x153681(0x1d1));const _0x5a147c=await fetchSAPLastMonthCarry();if(!Array[_0x153681(0x1e3)](_0x5a147c)||_0x5a147c[_0x153681(0x1b0)]===0x0){console['warn']('âš ï¸\x20No\x20valid\x20last\x20month\x20carry\x20data\x20received.');if(_0x5107c9)return _0x5107c9['status'](0x190)['json']({'message':_0x153681(0x1d4)});return;}console[_0x153681(0x1c4)](_0x153681(0x1db)+_0x5a147c[_0x153681(0x1b0)]+_0x153681(0x1a7));const _0x18ba4f=_0x5a147c[_0x153681(0x1b3)]((_0x1bea44,_0x52d8f2)=>{const _0x227b8a=_0x153681;if(!_0x1bea44||typeof _0x1bea44!==_0x227b8a(0x1b4))return console[_0x227b8a(0x1de)](_0x227b8a(0x1c6)+_0x52d8f2+':',_0x1bea44),null;return{'Vbeln':String(_0x1bea44?.['Vbeln']||''),'Posnr':String(_0x1bea44?.[_0x227b8a(0x1d5)]||''),'Vtweg':String(_0x1bea44?.['Vtweg']||''),'Spart':String(_0x1bea44?.[_0x227b8a(0x1d7)]||''),'Fkart':String(_0x1bea44?.['Fkart']||''),'Fktyp':String(_0x1bea44?.[_0x227b8a(0x1df)]||''),'Vkorg':String(_0x1bea44?.[_0x227b8a(0x1e5)]||''),'Waerk':String(_0x1bea44?.[_0x227b8a(0x1d0)]||''),'Gjahr':String(_0x1bea44?.[_0x227b8a(0x1b2)]||''),'Aubel':String(_0x1bea44?.[_0x227b8a(0x1c5)]||''),'Aupos':String(_0x1bea44?.['Aupos']||''),'Netwr':convertToDecimal(_0x1bea44?.[_0x227b8a(0x1b6)]),'Matnr':String(_0x1bea44?.['Matnr']||''),'Fkimg':convertToDecimal(_0x1bea44?.[_0x227b8a(0x1bb)]),'Matkl':String(_0x1bea44?.[_0x227b8a(0x1cb)]||''),'Kwmeng':convertToDecimal(_0x1bea44?.[_0x227b8a(0x1a4)]),'PendingQty':convertToDecimal(_0x1bea44?.[_0x227b8a(0x1ac)]),'OdrVal':convertToDecimal(_0x1bea44?.[_0x227b8a(0x1c2)]),'Kunnr':String(_0x1bea44?.[_0x227b8a(0x1a8)]||''),'Kursk':convertToDecimal(_0x1bea44?.['Kursk']),'Bzirk':String(_0x1bea44?.[_0x227b8a(0x1a6)]||''),'Zone':String(_0x1bea44?.[_0x227b8a(0x1a3)]||''),'MonthD':String(_0x1bea44?.[_0x227b8a(0x1bd)]||''),'MonthDesc':String(_0x1bea44?.['MonthDesc']||'')};})[_0x153681(0x1ad)](Boolean);console['log']('ðŸ“Œ\x20Final\x20Processed\x20Data:',JSON[_0x153681(0x1cf)](_0x18ba4f,null,0x2));const _0x54bca2=await insertOrUpdateLastMonthCarry(_0x18ba4f);if(!_0x54bca2||typeof _0x54bca2!==_0x153681(0x1b4)||!_0x54bca2['success']){console[_0x153681(0x1de)](_0x153681(0x1ab),_0x54bca2?.['error']||'Unknown\x20error');if(_0x5107c9)return _0x5107c9[_0x153681(0x19e)](0x1f4)[_0x153681(0x1ce)]({'message':'Error\x20inserting\x20or\x20updating\x20data','error':_0x54bca2?.[_0x153681(0x1de)]||_0x153681(0x1b1)});return;}console[_0x153681(0x1c4)](_0x153681(0x1b8));if(_0x5107c9)return _0x5107c9['status'](0xc8)[_0x153681(0x1ce)]({'message':_0x153681(0x1b9),'insertedRows':_0x54bca2[_0x153681(0x19f)]['length'],'updatedRows':_0x54bca2[_0x153681(0x19f)][_0x153681(0x1b0)],'failedRows':_0x54bca2['failedRows']['length'],'errors':_0x54bca2[_0x153681(0x1a2)]});}catch(_0xc88ee5){console[_0x153681(0x1de)](_0x153681(0x1cd),_0xc88ee5[_0x153681(0x1d2)]);if(_0x5107c9)return _0x5107c9['status'](0x1f4)['json']({'message':_0x153681(0x1ca),'error':_0xc88ee5[_0x153681(0x1d2)]});}};module[a3_0x27dc20(0x1c3)]={'fetchAndStoreLastMonthCarry':fetchAndStoreLastMonthCarry};