const a2_0x254981=a2_0xc098;(function(_0x516962,_0x5bd706){const _0x23284b=a2_0xc098,_0x1733e8=_0x516962();while(!![]){try{const _0x1b6dde=parseInt(_0x23284b(0x186))/0x1*(-parseInt(_0x23284b(0x187))/0x2)+-parseInt(_0x23284b(0x182))/0x3*(parseInt(_0x23284b(0x198))/0x4)+parseInt(_0x23284b(0x18e))/0x5*(parseInt(_0x23284b(0x195))/0x6)+parseInt(_0x23284b(0x19a))/0x7*(parseInt(_0x23284b(0x170))/0x8)+parseInt(_0x23284b(0x17a))/0x9*(parseInt(_0x23284b(0x196))/0xa)+parseInt(_0x23284b(0x193))/0xb+-parseInt(_0x23284b(0x171))/0xc;if(_0x1b6dde===_0x5bd706)break;else _0x1733e8['push'](_0x1733e8['shift']());}catch(_0x38851c){_0x1733e8['push'](_0x1733e8['shift']());}}}(a2_0x9f60,0xd67b4));function a2_0x9f60(){const _0x2bfb9f=['\x20Customer\x20data\x20synced\x20successfully','ðŸš€\x20Starting\x20Customer\x20Data\x20Sync...','CUSTOMER_API','ðŸ“¦\x20Received\x20','axios','âš ï¸\x20Received\x20empty\x20response\x20from\x20API','map','\x20customers\x20from\x20API','Empty\x20response\x20from\x20API','exports','Name1','8rLDoqV','12221496jPcXbc','Internal\x20Server\x20Error','message','data','Error\x20insering\x20or\x20updating\x20customer\x20data','Kunnr','Invalid\x20data\x20format\x20received\x20from\x20SAP','log','\x20API\x20Response\x20Data:','669015WOuRvP','error','stringify','âœ…\x20Customer\x20Data\x20Sync\x20Completed\x20Successfully\x20','Unexpected\x20database\x20response','Bzirk','âœ…\x20API\x20Response\x20Received.\x20Length:','../models/customerModel','4572075StpRvT','SAP_USERNAME','SAP\x20API\x20Error:\x20','Database\x20error','3LWiSci','910174mjzqZq','length','get','âŒ\x20Error\x20syncing\x20customer\x20data:','object','dotenv','warn','300MRpRPt','status','json','ðŸ”„\x20Processing\x20Customer\x20','results','11843689EyVmrP','Vkorg','118992lysQjx','230GMTMcL','success','4QDmOWX','processedRows','5669552jvXfGF','âŒ\x20API\x20Response\x20Format\x20Incorrect:'];a2_0x9f60=function(){return _0x2bfb9f;};return a2_0x9f60();}const axios=require(a2_0x254981(0x1a0)),{upsertCustomer}=require(a2_0x254981(0x181));function a2_0xc098(_0x5adae5,_0x5b9736){const _0x9f6034=a2_0x9f60();return a2_0xc098=function(_0xc098c9,_0x5c9a7a){_0xc098c9=_0xc098c9-0x170;let _0x2b739b=_0x9f6034[_0xc098c9];return _0x2b739b;},a2_0xc098(_0x5adae5,_0x5b9736);}require(a2_0x254981(0x18c))['config']();const API_URL=process['env'][a2_0x254981(0x19e)],fetchSAPCustomers=async()=>{const _0x205009=a2_0x254981;try{console[_0x205009(0x178)]('ðŸ”\x20Fetching\x20Customer\x20Data\x20from\x20API:',API_URL);const _0x3cd306=await axios[_0x205009(0x189)](API_URL,{'auth':{'username':process['env'][_0x205009(0x183)],'password':process['env']['SAP_PASSWORD']},'headers':{'Accept':'application/json'},'responseType':_0x205009(0x190)});if(!_0x3cd306[_0x205009(0x174)]){console[_0x205009(0x18d)](_0x205009(0x1a1));throw new Error(_0x205009(0x1a4));}return console['log'](_0x205009(0x180),JSON[_0x205009(0x17c)](_0x3cd306[_0x205009(0x174)])[_0x205009(0x188)]),console[_0x205009(0x178)](_0x205009(0x179),JSON['stringify'](_0x3cd306[_0x205009(0x174)],null,0x2)),_0x3cd306[_0x205009(0x174)];}catch(_0x1af2e5){console[_0x205009(0x17b)]('âŒ\x20Error\x20fetching\x20SAP\x20customer\x20data:',_0x1af2e5[_0x205009(0x173)]);throw new Error(_0x205009(0x184)+_0x1af2e5[_0x205009(0x173)]);}},fetchAndStoreCustomers=async(_0x2596e7,_0x4861e7)=>{const _0x4b4d4c=a2_0x254981;try{console['log'](_0x4b4d4c(0x19d));const _0x5470ec=await fetchSAPCustomers();if(!_0x5470ec||typeof _0x5470ec!==_0x4b4d4c(0x18b)||!_0x5470ec['d']||!Array['isArray'](_0x5470ec['d'][_0x4b4d4c(0x192)]))return console[_0x4b4d4c(0x17b)](_0x4b4d4c(0x19b),JSON[_0x4b4d4c(0x17c)](_0x5470ec)['slice'](0x0,0xa)+'...'),_0x4861e7['status'](0x190)[_0x4b4d4c(0x190)]({'message':_0x4b4d4c(0x177)});console[_0x4b4d4c(0x178)](_0x4b4d4c(0x19f)+_0x5470ec['d'][_0x4b4d4c(0x192)][_0x4b4d4c(0x188)]+_0x4b4d4c(0x1a3));const _0x33fa48=_0x5470ec['d'][_0x4b4d4c(0x192)][_0x4b4d4c(0x1a2)]((_0x30226e,_0x1fa609)=>{const _0x239846=_0x4b4d4c;return console[_0x239846(0x178)](_0x239846(0x191)+(_0x1fa609+0x1)+':',_0x30226e['Kunnr']),{'Kunnr':String(_0x30226e[_0x239846(0x176)]),'Zone':String(_0x30226e['Zone']),'Vkorg':String(_0x30226e[_0x239846(0x194)]),'Bzirk':String(_0x30226e[_0x239846(0x17f)]||''),'Name1':String(_0x30226e[_0x239846(0x1a6)]),'Bztxt':String(_0x30226e['Bztxt']||'')};})['filter'](Boolean);console[_0x4b4d4c(0x178)]('ðŸ“Œ\x20Final\x20Data\x20Before\x20Upsertion:',JSON[_0x4b4d4c(0x17c)](_0x33fa48,null,0x2));const _0x1d4c58=await upsertCustomer(_0x33fa48);if(!_0x1d4c58||typeof _0x1d4c58!==_0x4b4d4c(0x18b)||!_0x1d4c58[_0x4b4d4c(0x197)]){console['error']('\x20Error\x20inserted\x20or\x20updating\x20customer\x20data:',_0x1d4c58?.[_0x4b4d4c(0x17b)]||_0x4b4d4c(0x17e));if(_0x4861e7)return _0x4861e7[_0x4b4d4c(0x18f)](0x1f4)[_0x4b4d4c(0x190)]({'message':_0x4b4d4c(0x175),'error':_0x1d4c58?.[_0x4b4d4c(0x17b)]||_0x4b4d4c(0x185)});return;}console[_0x4b4d4c(0x178)](_0x4b4d4c(0x17d));if(_0x4861e7)return _0x4861e7['status'](0xc8)[_0x4b4d4c(0x190)]({'message':_0x4b4d4c(0x19c),'insertedRows':_0x1d4c58[_0x4b4d4c(0x199)]['length'],'updatedRows':_0x1d4c58[_0x4b4d4c(0x199)][_0x4b4d4c(0x188)],'failedRows':_0x1d4c58['failedRows'][_0x4b4d4c(0x188)],'errors':_0x1d4c58['failedRows']});}catch(_0x4f86fe){console['error'](_0x4b4d4c(0x18a),_0x4f86fe[_0x4b4d4c(0x173)]);if(_0x4861e7)return _0x4861e7[_0x4b4d4c(0x18f)](0x1f4)['json']({'message':_0x4b4d4c(0x172),'error':_0x4f86fe[_0x4b4d4c(0x173)]});}};module[a2_0x254981(0x1a5)]={'fetchAndStoreCustomers':fetchAndStoreCustomers};