function a2_0x2e00(_0x11f50b,_0x4ad35a){const _0xba1815=a2_0xba18();return a2_0x2e00=function(_0x2e00d3,_0x597a76){_0x2e00d3=_0x2e00d3-0x90;let _0x4db459=_0xba1815[_0x2e00d3];return _0x4db459;},a2_0x2e00(_0x11f50b,_0x4ad35a);}const a2_0xb6d85e=a2_0x2e00;(function(_0x36746d,_0x1668bc){const _0xa932cc=a2_0x2e00,_0x53873a=_0x36746d();while(!![]){try{const _0x1c9e20=parseInt(_0xa932cc(0xc0))/0x1+parseInt(_0xa932cc(0x9c))/0x2*(-parseInt(_0xa932cc(0x93))/0x3)+parseInt(_0xa932cc(0xac))/0x4+parseInt(_0xa932cc(0x96))/0x5*(parseInt(_0xa932cc(0xb4))/0x6)+-parseInt(_0xa932cc(0x9b))/0x7*(-parseInt(_0xa932cc(0x98))/0x8)+parseInt(_0xa932cc(0xbb))/0x9*(parseInt(_0xa932cc(0xbd))/0xa)+-parseInt(_0xa932cc(0x99))/0xb;if(_0x1c9e20===_0x1668bc)break;else _0x53873a['push'](_0x53873a['shift']());}catch(_0x55e338){_0x53873a['push'](_0x53873a['shift']());}}}(a2_0xba18,0x650a4));function a2_0xba18(){const _0x45eb9b=['Unexpected\x20database\x20response','Zone','Database\x20error','log','Name1','üìå\x20Final\x20Data\x20Before\x20Upsertion:','slice','‚úÖ\x20Customer\x20Data\x20Sync\x20Completed\x20Successfully\x20','dotenv','üì¶\x20Received\x20','\x20Error\x20inserted\x20or\x20updating\x20customer\x20data:','data','object','1640524FpZSAG','Invalid\x20data\x20format\x20received\x20from\x20SAP','üöÄ\x20Starting\x20Customer\x20Data\x20Sync...','‚ùå\x20Error\x20fetching\x20SAP\x20customer\x20data:','CUSTOMER_API','processedRows','../models/customerModel','length','42riPWHj','message','SAP\x20API\x20Error:\x20','‚ö†Ô∏è\x20Received\x20empty\x20response\x20from\x20API','üîç\x20Fetching\x20Customer\x20Data\x20from\x20API:','stringify','json','2762919bHYqGy','üîÑ\x20Processing\x20Customer\x20','10tOrKKs','env','Internal\x20Server\x20Error','803581liySSB','success','\x20API\x20Response\x20Data:','isArray','SAP_PASSWORD','Bztxt','216921RkLPdD','error','status','458330TPkFDM','failedRows','265576pVlGWf','17212591hbFNlB','exports','7bgMLWU','6ywLgXl','application/json','results'];a2_0xba18=function(){return _0x45eb9b;};return a2_0xba18();}const axios=require('axios'),{upsertCustomer}=require(a2_0xb6d85e(0xb2));require(a2_0xb6d85e(0xa7))['config']();const API_URL=process['env'][a2_0xb6d85e(0xb0)],fetchSAPCustomers=async()=>{const _0x34f4fd=a2_0xb6d85e;try{console['log'](_0x34f4fd(0xb8),API_URL);const _0x3f3435=await axios['get'](API_URL,{'auth':{'username':process[_0x34f4fd(0xbe)]['SAP_USERNAME'],'password':process['env'][_0x34f4fd(0x91)]},'headers':{'Accept':_0x34f4fd(0x9d)},'responseType':_0x34f4fd(0xba)});if(!_0x3f3435[_0x34f4fd(0xaa)]){console['warn'](_0x34f4fd(0xb7));throw new Error('Empty\x20response\x20from\x20API');}return console['log']('‚úÖ\x20API\x20Response\x20Received.\x20Length:',JSON[_0x34f4fd(0xb9)](_0x3f3435[_0x34f4fd(0xaa)])[_0x34f4fd(0xb3)]),console[_0x34f4fd(0xa2)](_0x34f4fd(0xc2),JSON[_0x34f4fd(0xb9)](_0x3f3435[_0x34f4fd(0xaa)],null,0x2)),_0x3f3435['data'];}catch(_0x183fae){console[_0x34f4fd(0x94)](_0x34f4fd(0xaf),_0x183fae['message']);throw new Error(_0x34f4fd(0xb6)+_0x183fae[_0x34f4fd(0xb5)]);}},fetchAndStoreCustomers=async(_0x9727bb,_0x3bef88)=>{const _0x170be8=a2_0xb6d85e;try{console['log'](_0x170be8(0xae));const _0x3c7300=await fetchSAPCustomers();if(!_0x3c7300||typeof _0x3c7300!==_0x170be8(0xab)||!_0x3c7300['d']||!Array[_0x170be8(0x90)](_0x3c7300['d'][_0x170be8(0x9e)]))return console['error']('‚ùå\x20API\x20Response\x20Format\x20Incorrect:',JSON[_0x170be8(0xb9)](_0x3c7300)[_0x170be8(0xa5)](0x0,0xa)+'...'),_0x3bef88[_0x170be8(0x95)](0x190)[_0x170be8(0xba)]({'message':_0x170be8(0xad)});console[_0x170be8(0xa2)](_0x170be8(0xa8)+_0x3c7300['d']['results'][_0x170be8(0xb3)]+'\x20customers\x20from\x20API');const _0x32f8a1=_0x3c7300['d'][_0x170be8(0x9e)]['map']((_0x522c22,_0x2c1257)=>{const _0x31c0f8=_0x170be8;return console['log'](_0x31c0f8(0xbc)+(_0x2c1257+0x1)+':',_0x522c22['Kunnr']),{'Kunnr':String(_0x522c22['Kunnr']),'Zone':String(_0x522c22[_0x31c0f8(0xa0)]),'Vkorg':String(_0x522c22['Vkorg']),'Bzirk':String(_0x522c22['Bzirk']||''),'Name1':String(_0x522c22[_0x31c0f8(0xa3)]),'Bztxt':String(_0x522c22[_0x31c0f8(0x92)]||'')};})['filter'](Boolean);console[_0x170be8(0xa2)](_0x170be8(0xa4),JSON[_0x170be8(0xb9)](_0x32f8a1,null,0x2));const _0x20ce9c=await upsertCustomer(_0x32f8a1);if(!_0x20ce9c||typeof _0x20ce9c!==_0x170be8(0xab)||!_0x20ce9c[_0x170be8(0xc1)]){console[_0x170be8(0x94)](_0x170be8(0xa9),_0x20ce9c?.[_0x170be8(0x94)]||_0x170be8(0x9f));if(_0x3bef88)return _0x3bef88['status'](0x1f4)[_0x170be8(0xba)]({'message':'Error\x20insering\x20or\x20updating\x20customer\x20data','error':_0x20ce9c?.[_0x170be8(0x94)]||_0x170be8(0xa1)});return;}console[_0x170be8(0xa2)](_0x170be8(0xa6));if(_0x3bef88)return _0x3bef88[_0x170be8(0x95)](0xc8)['json']({'message':'\x20Customer\x20data\x20synced\x20successfully','insertedRows':_0x20ce9c['processedRows'][_0x170be8(0xb3)],'updatedRows':_0x20ce9c[_0x170be8(0xb1)]['length'],'failedRows':_0x20ce9c[_0x170be8(0x97)][_0x170be8(0xb3)],'errors':_0x20ce9c[_0x170be8(0x97)]});}catch(_0xce90c7){console[_0x170be8(0x94)]('‚ùå\x20Error\x20syncing\x20customer\x20data:',_0xce90c7[_0x170be8(0xb5)]);if(_0x3bef88)return _0x3bef88[_0x170be8(0x95)](0x1f4)[_0x170be8(0xba)]({'message':_0x170be8(0xbf),'error':_0xce90c7['message']});}};module[a2_0xb6d85e(0x9a)]={'fetchAndStoreCustomers':fetchAndStoreCustomers};