const a10_0x4c5b31=a10_0x2bad;function a10_0x2bad(_0x2d1a62,_0x3dadea){const _0x5de935=a10_0x5de9();return a10_0x2bad=function(_0x2badb6,_0x2892ba){_0x2badb6=_0x2badb6-0x1c1;let _0x5be89d=_0x5de935[_0x2badb6];return _0x5be89d;},a10_0x2bad(_0x2d1a62,_0x3dadea);}(function(_0x4f9b34,_0x4b2e51){const _0x35cba2=a10_0x2bad,_0x114a7d=_0x4f9b34();while(!![]){try{const _0x3d487b=parseInt(_0x35cba2(0x1d8))/0x1+-parseInt(_0x35cba2(0x1cd))/0x2*(-parseInt(_0x35cba2(0x1d7))/0x3)+parseInt(_0x35cba2(0x1ea))/0x4*(parseInt(_0x35cba2(0x1e2))/0x5)+-parseInt(_0x35cba2(0x1e6))/0x6+-parseInt(_0x35cba2(0x1c2))/0x7*(parseInt(_0x35cba2(0x1e0))/0x8)+-parseInt(_0x35cba2(0x1c8))/0x9+-parseInt(_0x35cba2(0x1dd))/0xa*(-parseInt(_0x35cba2(0x1fa))/0xb);if(_0x3d487b===_0x4b2e51)break;else _0x114a7d['push'](_0x114a7d['shift']());}catch(_0x5f153d){_0x114a7d['push'](_0x114a7d['shift']());}}}(a10_0x5de9,0xba2ce));const {sql,poolPromise}=require('../config/db'),convertSAPDateTime=_0x38c513=>{const _0x1cb402=a10_0x2bad;if(!_0x38c513||!_0x38c513[_0x1cb402(0x1e9)](/\d+/))return new Date(_0x1cb402(0x1f6));const _0x4e8c0a=parseInt(_0x38c513[_0x1cb402(0x1e9)](/\d+/)[0x0],0xa);return new Date(_0x4e8c0a);},convertToDecimal=_0x9f24e6=>{const _0x2fb2ee=a10_0x2bad;if(!_0x9f24e6||isNaN(_0x9f24e6))return 0x0;return parseFloat(_0x9f24e6[_0x2fb2ee(0x1cf)]()[_0x2fb2ee(0x1f3)](',','.'));},insertOrUpdateSalesInvoices=async _0x3fdd83=>{const _0x588dd4=a10_0x2bad;if(!_0x3fdd83||_0x3fdd83[_0x588dd4(0x1fc)]===0x0)return console[_0x588dd4(0x1de)](_0x588dd4(0x1d4)),{'success':![],'message':_0x588dd4(0x1f7)};try{const _0x10f3dc=await poolPromise,_0x506f3b=new sql[(_0x588dd4(0x1d5))](_0x10f3dc);await _0x506f3b[_0x588dd4(0x1f4)]();for(let _0x14f515 of _0x3fdd83){try{console[_0x588dd4(0x1da)](_0x588dd4(0x1f9),_0x14f515[_0x588dd4(0x1dc)],_0x14f515[_0x588dd4(0x1d3)]),await _0x506f3b[_0x588dd4(0x1d6)]()[_0x588dd4(0x1c9)](_0x588dd4(0x1dc),sql[_0x588dd4(0x1ec)],_0x14f515[_0x588dd4(0x1dc)])[_0x588dd4(0x1c9)](_0x588dd4(0x1d3),sql[_0x588dd4(0x1ec)],_0x14f515['Posnr'])[_0x588dd4(0x1c9)](_0x588dd4(0x1c4),sql['VarChar'],_0x14f515[_0x588dd4(0x1c4)])[_0x588dd4(0x1c9)]('PlannedOrder',sql['Decimal'](0x12,0x3),parseFloat(_0x14f515[_0x588dd4(0x1fb)])||0x0)[_0x588dd4(0x1c9)](_0x588dd4(0x1ed),sql[_0x588dd4(0x1ec)],_0x14f515[_0x588dd4(0x1ed)])['input'](_0x588dd4(0x1ef),sql[_0x588dd4(0x1ec)],_0x14f515[_0x588dd4(0x1ef)])[_0x588dd4(0x1c9)](_0x588dd4(0x1e5),sql[_0x588dd4(0x1d0)](0x12,0x2),parseFloat(_0x14f515[_0x588dd4(0x1e5)])||0x0)[_0x588dd4(0x1c9)](_0x588dd4(0x1c5),sql['VarChar'],_0x14f515[_0x588dd4(0x1c5)])['input'](_0x588dd4(0x1c3),sql['VarChar'],_0x14f515[_0x588dd4(0x1c3)])[_0x588dd4(0x1c9)](_0x588dd4(0x1d2),sql[_0x588dd4(0x1d0)](0x12,0x3),parseFloat(_0x14f515[_0x588dd4(0x1d2)])||0x0)[_0x588dd4(0x1c9)](_0x588dd4(0x1c1),sql[_0x588dd4(0x1ec)],_0x14f515['Spart'])[_0x588dd4(0x1c9)](_0x588dd4(0x1e3),sql[_0x588dd4(0x1ec)],_0x14f515[_0x588dd4(0x1e3)])[_0x588dd4(0x1c9)](_0x588dd4(0x1fd),sql[_0x588dd4(0x1ec)],_0x14f515[_0x588dd4(0x1fd)])[_0x588dd4(0x1c9)]('Kunag',sql[_0x588dd4(0x1ec)],_0x14f515[_0x588dd4(0x1f8)])[_0x588dd4(0x1c9)](_0x588dd4(0x1ce),sql[_0x588dd4(0x1ec)],_0x14f515[_0x588dd4(0x1ce)])['input'](_0x588dd4(0x1f2),sql[_0x588dd4(0x1ec)],_0x14f515[_0x588dd4(0x1f2)])['input']('Werks',sql[_0x588dd4(0x1ec)],_0x14f515[_0x588dd4(0x1f5)])[_0x588dd4(0x1c9)](_0x588dd4(0x1c7),sql[_0x588dd4(0x1ec)],_0x14f515['Vkorg'])['input'](_0x588dd4(0x1f1),sql[_0x588dd4(0x1ec)],_0x14f515['Waerk'])['input']('Gjahr',sql[_0x588dd4(0x1df)],parseInt(_0x14f515[_0x588dd4(0x1e1)])||null)[_0x588dd4(0x1c9)](_0x588dd4(0x1ee),sql['DateTime'],_0x14f515[_0x588dd4(0x1ee)])[_0x588dd4(0x1c9)](_0x588dd4(0x1e4),sql[_0x588dd4(0x1ec)],_0x14f515[_0x588dd4(0x1e4)])[_0x588dd4(0x1f0)](_0x588dd4(0x1d9)),console[_0x588dd4(0x1da)](_0x588dd4(0x1cb)+_0x14f515[_0x588dd4(0x1dc)]+_0x588dd4(0x1eb)+_0x14f515[_0x588dd4(0x1d3)]);}catch(_0x5b8990){console['error'](_0x588dd4(0x1c6)+_0x14f515['Vbeln']+'-'+_0x14f515[_0x588dd4(0x1d3)]+':',_0x5b8990[_0x588dd4(0x1d1)]);}}return await _0x506f3b[_0x588dd4(0x1cc)](),console[_0x588dd4(0x1da)]('‚úÖ\x20All\x20sales\x20invoices\x20upserted\x20successfully.'),{'success':!![],'message':_0x588dd4(0x1e7)};}catch(_0x4046c8){return console['error'](_0x588dd4(0x1db),_0x4046c8),{'success':![],'message':_0x588dd4(0x1e8),'error':_0x4046c8};}};function a10_0x5de9(){const _0x67a163=['input','exports','‚úÖ\x20Upserted:\x20Vbeln=','commit','8wWlEjC','Fktyp','toString','Decimal','message','Totalinvoice','Posnr','‚ö†Ô∏è\x20No\x20sales\x20invoice\x20data\x20to\x20insert\x20or\x20update.','Transaction','request','736698fruwkH','1238080KjjYDM','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20MERGE\x20INTO\x20PRD_SalesInvoice\x20AS\x20target\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20USING\x20(SELECT\x20@Vbeln\x20AS\x20Vbeln,\x20@Posnr\x20AS\x20Posnr)\x20AS\x20source\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ON\x20target.Vbeln\x20=\x20source.Vbeln\x20AND\x20target.Posnr\x20=\x20source.Posnr\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHEN\x20MATCHED\x20THEN\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20UPDATE\x20SET\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Matnr\x20=\x20@Matnr,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20PlannedOrder\x20=\x20@PlannedOrder,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Wgbez\x20=\x20@Wgbez,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Bzirk\x20=\x20@Bzirk,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Netwr\x20=\x20@Netwr,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Vtweg\x20=\x20@Vtweg,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Matkl\x20=\x20@Matkl,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20TotalInvoice\x20=\x20@TotalInvoice,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Spart\x20=\x20@Spart,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Zone\x20=\x20@Zone,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Fkart\x20=\x20@Fkart,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Kunag\x20=\x20@Kunag,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Fktyp\x20=\x20@Fktyp,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Aupos\x20=\x20@Aupos,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Werks\x20=\x20@Werks,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Vkorg\x20=\x20@Vkorg,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Waerk\x20=\x20@Waerk,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Gjahr\x20=\x20@Gjahr,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Fkdat\x20=\x20@Fkdat,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Aubel\x20=\x20@Aubel\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHEN\x20NOT\x20MATCHED\x20THEN\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20INSERT\x20(Vbeln,\x20Posnr,\x20Matnr,\x20PlannedOrder,\x20Wgbez,\x20Bzirk,\x20Netwr,\x20Vtweg,\x20Matkl,\x20TotalInvoice,\x20Spart,\x20Zone,\x20Fkart,\x20Kunag,\x20Fktyp,\x20Aupos,\x20Werks,\x20Vkorg,\x20Waerk,\x20Gjahr,\x20Fkdat,\x20Aubel)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20VALUES\x20(@Vbeln,\x20@Posnr,\x20@Matnr,\x20@PlannedOrder,\x20@Wgbez,\x20@Bzirk,\x20@Netwr,\x20@Vtweg,\x20@Matkl,\x20@TotalInvoice,\x20@Spart,\x20@Zone,\x20@Fkart,\x20@Kunag,\x20@Fktyp,\x20@Aupos,\x20@Werks,\x20@Vkorg,\x20@Waerk,\x20@Gjahr,\x20@Fkdat,\x20@Aubel);\x0a\x20\x20\x20\x20\x20\x20\x20\x20','log','‚ùå\x20Transaction\x20Failed:','Vbeln','520190OBjZSF','warn','Int','337336Kmwfrd','Gjahr','5VhHsSj','Zone','Aubel','Netwr','6330192uiTXpb','Data\x20inserted/updated\x20successfully','Error\x20inserting/updating\x20data','match','1174792JHeeSy',',\x20Posnr=','VarChar','Wgbez','Fkdat','Bzirk','query','Waerk','Aupos','replace','begin','Werks','1900-01-01T00:00:00','No\x20data\x20provided\x20for\x20upsertion','Kunag','üîç\x20Processing\x20Invoice:','132zNTQKA','PlannedOrder','length','Fkart','Spart','175WLKmzp','Matkl','Matnr','Vtweg','‚ùå\x20Failed\x20to\x20process\x20invoice\x20','Vkorg','2398401TqIWHt'];a10_0x5de9=function(){return _0x67a163;};return a10_0x5de9();}module[a10_0x4c5b31(0x1ca)]={'insertOrUpdateSalesInvoices':insertOrUpdateSalesInvoices};