function a16_0x472b(_0x223b14,_0x3633c9){const _0xed66c6=a16_0xed66();return a16_0x472b=function(_0x472b05,_0x1e6cd4){_0x472b05=_0x472b05-0x178;let _0x21f19b=_0xed66c6[_0x472b05];return _0x21f19b;},a16_0x472b(_0x223b14,_0x3633c9);}const a16_0x25e505=a16_0x472b;(function(_0x706e80,_0x5bcbbe){const _0x153fbf=a16_0x472b,_0x37110b=_0x706e80();while(!![]){try{const _0xdfa2b4=-parseInt(_0x153fbf(0x18b))/0x1*(parseInt(_0x153fbf(0x184))/0x2)+parseInt(_0x153fbf(0x19e))/0x3*(parseInt(_0x153fbf(0x1ab))/0x4)+-parseInt(_0x153fbf(0x19f))/0x5*(-parseInt(_0x153fbf(0x1ad))/0x6)+parseInt(_0x153fbf(0x1a8))/0x7*(parseInt(_0x153fbf(0x198))/0x8)+-parseInt(_0x153fbf(0x192))/0x9+-parseInt(_0x153fbf(0x199))/0xa+-parseInt(_0x153fbf(0x17b))/0xb;if(_0xdfa2b4===_0x5bcbbe)break;else _0x37110b['push'](_0x37110b['shift']());}catch(_0x597345){_0x37110b['push'](_0x37110b['shift']());}}}(a16_0xed66,0xb310b));function a16_0xed66(){const _0x16e3ab=['No\x20data\x20provided\x20for\x20upsertion','input','Totalinvoice','match','68658ZVgqcu','‚úÖ\x20All\x20sales\x20invoices\x20upserted\x20successfully.','query','Fkart','Netwr','Spart','‚ö†Ô∏è\x20No\x20sales\x20invoice\x20data\x20to\x20insert\x20or\x20update.','11ayykLC','‚úÖ\x20Upserted:\x20Vbeln=','Waerk','Fkdat','log','1900-01-01T00:00:00','Aupos','1122003MPjsEo','Error\x20inserting/updating\x20data','Bzirk','Matkl','Posnr',',\x20Posnr=','344qrTVmb','14604640eiBuqD','../config/db','Transaction','replace','warn','3IONStJ','3954725NROqsX','Decimal','VarChar','Vbeln','Aubel','Vtweg','MonthDesc','Wgbez','Data\x20inserted/updated\x20successfully','139027HHRffJ','MonthD','‚ùå\x20Transaction\x20Failed:','4782696mCiQYJ','error','6iMkXuW','Zone','Fktyp','Gjahr','Vkorg','1588851cfiYUw','message','‚ùå\x20Failed\x20to\x20process\x20invoice\x20','Kunag','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20MERGE\x20INTO\x20PRD_SalesInvoice\x20AS\x20target\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20USING\x20(SELECT\x20@Vbeln\x20AS\x20Vbeln,\x20@Posnr\x20AS\x20Posnr)\x20AS\x20source\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ON\x20target.Vbeln\x20=\x20source.Vbeln\x20AND\x20target.Posnr\x20=\x20source.Posnr\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHEN\x20MATCHED\x20THEN\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20UPDATE\x20SET\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Matnr\x20=\x20@Matnr,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20PlannedOrder\x20=\x20@PlannedOrder,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Wgbez\x20=\x20@Wgbez,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Bzirk\x20=\x20@Bzirk,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Netwr\x20=\x20@Netwr,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Vtweg\x20=\x20@Vtweg,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Matkl\x20=\x20@Matkl,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20TotalInvoice\x20=\x20@TotalInvoice,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Spart\x20=\x20@Spart,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Zone\x20=\x20@Zone,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Fkart\x20=\x20@Fkart,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Kunag\x20=\x20@Kunag,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Fktyp\x20=\x20@Fktyp,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Aupos\x20=\x20@Aupos,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Werks\x20=\x20@Werks,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Vkorg\x20=\x20@Vkorg,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Waerk\x20=\x20@Waerk,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Gjahr\x20=\x20@Gjahr,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Fkdat\x20=\x20@Fkdat,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Aubel\x20=\x20@Aubel,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20MonthD\x20=\x20@MonthD,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20MonthDesc\x20=\x20@MonthDesc\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHEN\x20NOT\x20MATCHED\x20THEN\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20INSERT\x20(Vbeln,\x20Posnr,\x20Matnr,\x20PlannedOrder,\x20Wgbez,\x20Bzirk,\x20Netwr,\x20Vtweg,\x20Matkl,\x20TotalInvoice,\x20Spart,\x20Zone,\x20Fkart,\x20Kunag,\x20Fktyp,\x20Aupos,\x20Werks,\x20Vkorg,\x20Waerk,\x20Gjahr,\x20Fkdat,\x20Aubel,\x20MonthD,\x20MonthDesc)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20VALUES\x20(@Vbeln,\x20@Posnr,\x20@Matnr,\x20@PlannedOrder,\x20@Wgbez,\x20@Bzirk,\x20@Netwr,\x20@Vtweg,\x20@Matkl,\x20@TotalInvoice,\x20@Spart,\x20@Zone,\x20@Fkart,\x20@Kunag,\x20@Fktyp,\x20@Aupos,\x20@Werks,\x20@Vkorg,\x20@Waerk,\x20@Gjahr,\x20@Fkdat,\x20@Aubel,\x20@MonthD,\x20@MonthDesc);\x0a\x20\x20\x20\x20\x20\x20\x20\x20'];a16_0xed66=function(){return _0x16e3ab;};return a16_0xed66();}const {sql,poolPromise}=require(a16_0x25e505(0x19a)),convertSAPDateTime=_0x449395=>{const _0x110644=a16_0x25e505;if(!_0x449395||!_0x449395[_0x110644(0x183)](/\d+/))return new Date(_0x110644(0x190));const _0x430f03=parseInt(_0x449395[_0x110644(0x183)](/\d+/)[0x0],0xa);return new Date(_0x430f03);},convertToDecimal=_0x468747=>{const _0x3af32e=a16_0x25e505;if(!_0x468747||isNaN(_0x468747))return 0x0;return parseFloat(_0x468747['toString']()[_0x3af32e(0x19c)](',','.'));},insertOrUpdateSalesInvoices=async _0x14a948=>{const _0x3953ef=a16_0x25e505;if(!_0x14a948||_0x14a948['length']===0x0)return console[_0x3953ef(0x19d)](_0x3953ef(0x18a)),{'success':![],'message':_0x3953ef(0x180)};try{const _0x54d330=await poolPromise,_0x549ea1=new sql[(_0x3953ef(0x19b))](_0x54d330);await _0x549ea1['begin']();for(let _0x20099f of _0x14a948){try{console[_0x3953ef(0x18f)]('üîç\x20Processing\x20Invoice:',_0x20099f[_0x3953ef(0x1a2)],_0x20099f[_0x3953ef(0x196)]),await _0x549ea1['request']()[_0x3953ef(0x181)](_0x3953ef(0x1a2),sql[_0x3953ef(0x1a1)],_0x20099f[_0x3953ef(0x1a2)])[_0x3953ef(0x181)]('Posnr',sql[_0x3953ef(0x1a1)],_0x20099f['Posnr'])[_0x3953ef(0x181)]('Matnr',sql[_0x3953ef(0x1a1)],_0x20099f['Matnr'])['input']('PlannedOrder',sql[_0x3953ef(0x1a0)](0x12,0x3),parseFloat(_0x20099f['PlannedOrder'])||0x0)[_0x3953ef(0x181)]('Wgbez',sql[_0x3953ef(0x1a1)],_0x20099f[_0x3953ef(0x1a6)])['input'](_0x3953ef(0x194),sql['VarChar'],_0x20099f[_0x3953ef(0x194)])[_0x3953ef(0x181)](_0x3953ef(0x188),sql['Decimal'](0x12,0x2),parseFloat(_0x20099f[_0x3953ef(0x188)])||0x0)[_0x3953ef(0x181)](_0x3953ef(0x1a4),sql[_0x3953ef(0x1a1)],_0x20099f['Vtweg'])[_0x3953ef(0x181)]('Matkl',sql[_0x3953ef(0x1a1)],_0x20099f[_0x3953ef(0x195)])[_0x3953ef(0x181)](_0x3953ef(0x182),sql[_0x3953ef(0x1a0)](0x12,0x3),parseFloat(_0x20099f['Totalinvoice'])||0x0)[_0x3953ef(0x181)](_0x3953ef(0x189),sql['VarChar'],_0x20099f[_0x3953ef(0x189)])[_0x3953ef(0x181)](_0x3953ef(0x1ae),sql['VarChar'],_0x20099f[_0x3953ef(0x1ae)])[_0x3953ef(0x181)](_0x3953ef(0x187),sql[_0x3953ef(0x1a1)],_0x20099f[_0x3953ef(0x187)])['input']('Kunag',sql[_0x3953ef(0x1a1)],_0x20099f[_0x3953ef(0x17e)])[_0x3953ef(0x181)](_0x3953ef(0x178),sql['VarChar'],_0x20099f[_0x3953ef(0x178)])[_0x3953ef(0x181)](_0x3953ef(0x191),sql['VarChar'],_0x20099f['Aupos'])[_0x3953ef(0x181)]('Werks',sql[_0x3953ef(0x1a1)],_0x20099f['Werks'])['input'](_0x3953ef(0x17a),sql[_0x3953ef(0x1a1)],_0x20099f['Vkorg'])[_0x3953ef(0x181)](_0x3953ef(0x18d),sql['VarChar'],_0x20099f['Waerk'])[_0x3953ef(0x181)](_0x3953ef(0x179),sql['Int'],parseInt(_0x20099f[_0x3953ef(0x179)])||null)[_0x3953ef(0x181)](_0x3953ef(0x18e),sql['DateTime'],_0x20099f['Fkdat'])[_0x3953ef(0x181)](_0x3953ef(0x1a3),sql[_0x3953ef(0x1a1)],_0x20099f[_0x3953ef(0x1a3)])[_0x3953ef(0x181)]('MonthD',sql[_0x3953ef(0x1a1)](0x14),_0x20099f[_0x3953ef(0x1a9)])[_0x3953ef(0x181)](_0x3953ef(0x1a5),sql[_0x3953ef(0x1a1)](0x14),_0x20099f[_0x3953ef(0x1a5)])[_0x3953ef(0x186)](_0x3953ef(0x17f)),console[_0x3953ef(0x18f)](_0x3953ef(0x18c)+_0x20099f[_0x3953ef(0x1a2)]+_0x3953ef(0x197)+_0x20099f[_0x3953ef(0x196)]);}catch(_0x28f1b8){console[_0x3953ef(0x1ac)](_0x3953ef(0x17d)+_0x20099f[_0x3953ef(0x1a2)]+'-'+_0x20099f[_0x3953ef(0x196)]+':',_0x28f1b8[_0x3953ef(0x17c)]);}}return await _0x549ea1['commit'](),console[_0x3953ef(0x18f)](_0x3953ef(0x185)),{'success':!![],'message':_0x3953ef(0x1a7)};}catch(_0x3c9c28){return console['error'](_0x3953ef(0x1aa),_0x3c9c28),{'success':![],'message':_0x3953ef(0x193),'error':_0x3c9c28};}};module['exports']={'insertOrUpdateSalesInvoices':insertOrUpdateSalesInvoices};